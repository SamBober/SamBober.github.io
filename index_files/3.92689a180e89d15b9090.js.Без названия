webpackJsonp([3],{"09Qt":function(t,e,a){var r=a("uIr7"),n=a("vi0E"),s=a("l9Lx"),i=a("C0hh"),o=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,s(t)),t=n(t);return e}:i;t.exports=o},"0W7u":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("MHaV"),n=a("iClD"),s={mixins:[r.a],data:function(){return{showAllJobStories:!1,stories:[]}},created:function(){var t=this;this.$api.getEmplyeeCompanyHistory2({Url:this.url}).then(function(e){t.stories=e,t.loadComplete=!0})},methods:{date:n.c},computed:{showMoreJobStories:function(){return this.stories.length>6},showMoreJobStoriesText:function(){return this.showAllJobStories?"Скрыть":"Показать все"},jobStoriesList:function(){return this.showAllJobStories?this.stories:this.stories.slice(0,6)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("widget",{attrs:{"is-load":t.loadComplete}},[a("template",{slot:"title"},[t._v(t._s(t.$tree.Title)+" "),a("span",{staticClass:"badge-text"},[t._v(t._s(t.stories.length))])]),t._v(" "),a("div",{staticClass:"widget__body"},[a("div",{staticClass:"uk-overflow-container"},[a("non-data-stub",{attrs:{stub:"text","stub-data":t.stories}},[a("table",{staticClass:"uk-table uk-table-striped uk-text-small staff-detail-table"},[a("thead",[a("tr",[a("th",{attrs:{width:"100px"}},[t._v("Дата")]),t._v(" "),a("th",{attrs:{width:"160px"}},[t._v("Операция")]),t._v(" "),a("th",{attrs:{width:"160px"}},[t._v("Организация")]),t._v(" "),a("th",[t._v("Подразделение")]),t._v(" "),a("th",{attrs:{width:"200px"}},[t._v("Должность")]),t._v(" "),a("th",{attrs:{width:"200px"}},[t._v("Вид занятости")])])]),t._v(" "),a("tbody",t._l(t.jobStoriesList,function(e,r){return a("tr",{key:r},[a("td",{staticClass:"text-nowrap",domProps:{innerHTML:t._s(t.date(e.Date))}}),t._v(" "),a("td",[t._v(t._s(e.Operation))]),t._v(" "),a("td",[a("permission-link",{attrs:{signature:"cfc.suppliers.company",params:{url:e.CompanyUrl}}},[t._v("\n                  "+t._s(e.CompanyName)+"\n                ")])],1),t._v(" "),a("td",[t._v(t._s(e.DepartmentName))]),t._v(" "),a("td",[t._v(t._s(e.Position))]),t._v(" "),a("td",[t._v(t._s(e.Employment))])])}))])]),t._v(" "),t.showMoreJobStories?a("div",{staticClass:"text-center mt-20"},[a("el-button",{staticClass:"el-button--wide",attrs:{type:"primary",plain:!0,icon:"arrow-down"},on:{click:function(e){e.preventDefault(),t.showAllJobStories=!t.showAllJobStories}}},[t._v("\n          "+t._s(t.showMoreJobStoriesText)+"\n        ")])],1):t._e()],1)])],2)},staticRenderFns:[]},o=a("VU/8")(s,i,!1,null,null,null);e.default=o.exports},"0uX4":function(t,e,a){var r=a("NkRn"),n=r?r.prototype:void 0,s=n?n.valueOf:void 0;t.exports=function(t){return s?Object(s.call(t)):{}}},"0xFh":function(t,e){},"1AJS":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("MHaV"),n=a("Dd8w"),s=a.n(n),i=a("Za4h"),o=a.n(i),l=a("M4fF"),c=a("V1ii"),d=a("jSxR"),u=a.n(d);function f(t,e){return t+" link"}var m={props:{chartData:{type:Object}},data:function(){return{staffTree:null,svg:null,treeLayout:o.a.layout.tree().nodeSize([0,20]).children(function(t){return t.children}),nodes:[],staffHeight:0,margin:{top:5,right:20,bottom:50,left:1},imgHeight:50,indent:50,basicBarHeight:80,barMargin:25,barPadding:20,test:{},duration:400,paletteChar:["#a0abba"],photoStub:u.a,staffTNewData:null}},computed:{width:function(){return 1200-this.margin.left-this.margin.right},barWidth:function(){return this.width-4*this.indent+20}},mounted:function(){this.initData()},methods:{initData:function(){var t=this.chartData;this.staffTree=t,this.test=Object(l.cloneDeep)(t),this.staffTree.x0=0,this.staffTree.y0=0,this.svg=o.a.select("#chart"),this.nodes=this.treeLayout(this.staffTree),this.nodes.forEach(function(t){t.expanded=!1,t.barHeight=0}),this.update(this.staffTree),this.collapse1(this.staffTree)},update:function(t){var e=this;this.nodes=this.treeLayout(this.staffTree),t.x0&&t.y0||(t.x0=t.x,t.y0=t.y);var a=0,r=this.duration;function n(t){return t.source}function s(t){return t.target}function i(t){return[t.x,t.y]}o.a.svg.diagonal=function(){var t=n,e=s,a=i;function r(r,n){var s=t.call(this,r,n),i=e.call(this,r,n),o=(s.y+i.y)/2,l=[s,{x:s.x,y:o},{x:i.x,y:o},i];return"M"+(l=l.map(a))[0]+"M"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(e){return arguments.length?(t=d3_functor(e),r):t},r.target=function(t){return arguments.length?(e=d3_functor(t),r):e},r.projection=function(t){return arguments.length?(a=t,r):a},r};var d=o.a.svg.diagonal().projection(function(t){return[t.y,t.x]}),u=o.a.select("#chart>svg").selectAll("g.node").data(this.nodes,function(t){return t.ID||(t.ID=++a)}),m=u.enter().append("g").attr("class","node").attr("id",function(t){return"staffTree-"+t.ID}).attr("data-depth",function(t){return t.depth}).attr("transform",function(e){return"translate("+t.y0+","+t.x0+")"}).style("opacity",1e-6);m.append("rect").attr("class","linkPatch").attr("x",1).attr("width",e.indent).style("stroke-width",0).style("fill-opacity",1),m.append("rect").attr("class","block").attr("x",0).attr("rx",5).attr("ry",5).attr("width",function(t){return e.barWidth}),m.append("svg:image").attr("x",40).attr("y",17).attr("height",15).attr("visibility",function(t){return t.Icon?"visibile":"hidden"}).attr("xlink:href",function(t){return t.Icon?"data:image/svg+xml,"+t.Icon.replace("svg",'svg fill="'+c.c.clusterTheme.get(t.ColorTheme)+'"'):""}).attr("transform","translate(-20, 0)"),m.append("text").attr("dx","0em").attr("dy","1.5em").attr("x",function(t){return t.Icon?e.barPadding+25:e.barPadding}).attr("y",e.barPadding-12).text(function(t){return t.Title&&t.Title.length&&t.Title.length>120?t.Title.substr(0,120)+"...":t.Title}).attr("class","department").style("fill",function(t){return c.c.clusterTheme.get(t.ColorTheme)}),m.append("rect").attr("class","departmentButton").attr("x",10).attr("height",30).attr("width",30).attr("rx",15).attr("ry",15).on("click",e.click),m.append("g").attr("class","departmentLoader").append("g").append("text").attr("font-family","element-icons").text(""),m.append("text").attr("class","departmentButtonText");var p=e.imgHeight/2,h=function(t){return"circle("+p+"px at center)"},v=.32*(e.barWidth-2*e.barPadding),g=m.append("g").attr("class",f.bind(null,"chiefView")).attr("visibility",function(t){return t.Owner&&t.Owner.FIO?"visibile":"hidden"}),b=g.append("g").attr("class","staffPhoto");b.append("image").attr("width",function(t){return(t.Owner&&t.Owner.Photo?1:.6)*e.imgHeight}).attr("height",function(t){return(t.Owner&&t.Owner.Photo?1:.6)*e.imgHeight}).attr("class","photo").attr("xlink:href",function(t){return"data:"+(t.Owner&&t.Owner.Photo?"image/jpeg;base64,"+t.Owner.Photo:"image/svg+xml,"+encodeURIComponent(Object(c.b)(e.photoStub,"#eff0f2")))}).style("clip-path",h).style("-webkit-clip-path",h).attr("transform",function(t){return t.Owner&&t.Owner.Photo?null:"translate("+.2*e.imgHeight+","+.2*e.imgHeight+")"}),b.append("circle").attr("cx",p).attr("cy",p).attr("r",p).attr("display",function(t){return t.Owner&&t.Owner.FIO&&!t.Owner.Photo?"block":"none"}),g.append("text").attr("x",e.imgHeight+9).attr("y",p+12).attr("dx","1em").attr("dy","-0.25em").text(function(t){return t.Owner&&t.Owner.Position?t.Owner.Position:""}).attr("fill","#a0abba").attr("class","position").attr("data-par",function(t){return 21*Object(l.filter)(t.Products,"ProductIcon").length}),g.append("text").attr("x",e.imgHeight+10).attr("y",p-8).attr("dx","0.75em").text(function(t){return t.Owner&&t.Owner.FIO?t.Owner.FIO:""}).attr("class","fio"),g.append("rect").attr("width",v).attr("height",e.basicBarHeight).attr("rx",5).attr("ry",5).on("click",e.gotoEmployeeCard);var y=m.append("g").attr("class",f.bind(null,"chiefView")).attr("visibility",function(t){return t.Owner&&t.Owner.Company&&t.Owner.Company.ShortName?"visibile":"hidden"}).on("click",e.gotoCompanyPage);y.append("rect").attr("x",110).attr("y",91).attr("rx",7).attr("ry",7).attr("width",50).attr("height",20),y.append("svg:image").attr("text-anchor","middle").attr("x",132).attr("y",93).attr("height",15).attr("visibility",function(t){return t.Owner&&t.Owner.Company&&t.Owner.Company.Logo?"visibile":"hidden"}).attr("xlink:href",function(t){return t.Owner&&t.Owner.Company&&t.Owner.Company.Logo?"data:image/svg+xml,"+t.Owner.Company.Logo:""}).attr("transform","translate(-20, 0)"),y.append("text").attr("x",function(t){return t.Owner&&t.Owner.Company&&t.Owner.Company.Logo?132:110}).attr("y",105).text(function(t){return t.Owner&&t.Owner.Company&&t.Owner.Company.ShortName?t.Owner.Company.ShortName:""}).attr("class","chief-company");var _=m.append("g").attr("class","empCountView");_.append("text").attr("class","emp-count").text(function(t){return t.EmpCount}).attr("text-anchor","middle"),_.append("text").attr("dy","1.2em").text(function(t){var e=t.EmpCount%10;return" сотрудник"+(0===e||e>=5||t.EmpCount>=11&&t.EmpCount<=14?"ов":1===e?"":"а")}).attr("fill",e.paletteChar[0]).style("font-size","13px").attr("text-anchor","middle");var C=0;this.nodes.forEach(function(t,a){t.x=e.margin.top+a*e.barMargin+C,t.expandable=t.SubordinateUnits>0;var r=o.a.select("#staffTree-"+t.ID+" > .empCountView"),n=0;try{var s=o.a.select("#staffTree-"+t.ID+" > text.department").attr("data-lines");s>3&&(n+=15*(s-3)),o.a.select("#staffTree-"+t.ID+" > .chiefView").attr("transform","translate("+(e.barPadding+20)+","+(e.barPadding+25)+")"),r.attr("transform","translate("+(e.barWidth-e.barPadding-r.node().getBBox().width/2)+","+(e.barPadding+(e.basicBarHeight+n)/2)+")")}catch(t){}t.addSpace=n,t.barHeight=(t.Staff&&t.Staff.length&&t.staffView||t.staffLoading&&t.SubordinateEmpCount?Math.ceil(t.SubordinateEmpCount/3)+1:1)*(e.basicBarHeight+5)+n+2*e.barPadding;var i=o.a.selectAll("#staffTree-"+t.ID+" > .departmentButton"),l=o.a.selectAll("#staffTree-"+t.ID+" .departmentButtonText"),c=o.a.selectAll("#staffTree-"+t.ID+" > .departmentLoader");i.style("visibility",t.depth&&t.expandable?"visible":"hidden").attr("y",t.barHeight-15),l.attr("visibility",t.depth&&t.expandable&&!t.departmentsLoading?"visible":"hidden").attr("x",function(t){return t.expanded?21:19}).attr("y",function(e){return t.barHeight+(e.expanded?7:8)}).text(function(t){return t.expanded?"-":"+"}),c.attr("transform","translate("+(t.depth?17:14)+","+(t.barHeight+(t.depth?7:-7))+")").attr("visibility",t.departmentsLoading?"visible":"hidden"),C+=t.barHeight,t.y=e.indent*t.depth+e.margin.left}),C+=e.margin.top+e.margin.bottom+e.nodes.length*e.barMargin,m.attr("x",e.basicBarHeight),this.staffHeight=C;u.selectAll("rect.block, rect.linkPatch").transition().duration(r).attr("height",function(t){return t.barHeight}),this.nodes.forEach(function(t,e){t.x0=t.x,t.y0=t.y}),m.transition().duration(r).attr("transform",function(t){return"translate("+t.y+","+t.x+")"}).style("opacity",1),u.transition().duration(r).attr("transform",function(t){return"translate("+t.y+","+t.x+")"}).style("opacity",1),u.exit().transition().duration(r).attr("transform",function(e){return"translate("+t.y0+","+t.x0+")"}).style("opacity",1e-6).remove();var x=o.a.select("#chart>svg g.links").selectAll("path.link").data(e.treeLayout.links(this.nodes),function(t){return t.target.ID});x.enter().insert("path","g").attr("class","link").attr("d",function(e){var a={x:t.x0,y:t.y0};return d({source:a,target:a})}).attr("stroke",e.paletteChar[0]).transition().duration(r).attr("d",d),x.transition().duration(r).attr("d",d),x.exit().transition().duration(r).attr("d",function(e){var a={x:t.x,y:t.y};return d({source:a,target:a})}).remove(),u.filter(function(t,e){return t.Companies}).each(function(t){o.a.select(this).selectAll(".chiefView, .empCountView, .department, .departmentLoader, .linkPatch, .departmentButton, .departmentButtonText").remove(),o.a.select(this).select(".block").style("stroke-width","0px");var a=o.a.select(this).selectAll("g.company-node").data(t.Companies).enter().append("g").attr("x",0).attr("y",0).attr("class","company-node").attr("transform",function(t,e){return"translate("+145*e+",0)"});a.append("rect").attr("class","company-block").attr("x",0).attr("y",0).attr("rx",7).attr("ry",7).attr("width",135).attr("height",124),a.append("line").attr("x1",67).attr("y1",0).attr("x2",67).attr("y2",-25).attr("stroke","rgb(160, 171, 186)").attr("stroke-width","2px"),a.append("svg:image").attr("text-anchor","middle").attr("x",68).attr("y",17).attr("height",30).attr("visibility",function(t){return t.Company&&t.Company.Logo?"visibile":"hidden"}).attr("xlink:href",function(t){return t.Company&&t.Company.Logo?"data:image/svg+xml,"+t.Company.Logo:""}).attr("transform","translate(-15, 0)"),a.append("text").attr("x",68).attr("y",65).attr("text-anchor","middle").attr("alignment-baseline","central").text(function(t){return t.Company&&t.Company.ShortName?t.Company.ShortName:""}).style("font-weight","bold").style("font-size","11px");var r=a.append("text").attr("x",68).attr("y",90).attr("text-anchor","middle").attr("alignment-baseline","central").attr("class",f.bind(null,"company-staff")).on("click",e.gotoCompanyStaff);r.append("tspan").text(function(t){return t.Company&&t.Company.EmpCount?t.Company.EmpCount:"-"}),r.append("tspan").attr("class","fio").text(function(t){if(t.Company&&t.Company.EmpCount){var e=t.Company.EmpCount%10;return" сотрудник"+(0===e||e>=5||t.Company.EmpCount>=11&&t.Company.EmpCount<=14?"ов":1===e?"":"а")}})}),o.a.select('[data-depth="0"] .chiefView').attr("transform","translate(40, 35)"),o.a.select('[data-depth="0"] .chief-company').attr("y",95),o.a.select('[data-depth="0"] .fio').attr("y",25),o.a.select('[data-depth="0"] .position').attr("y",45)},click:function(t){var e=function t(e){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=0;r<e.length;r++){var n=e[r];Array.isArray(n.children)&&n.children.length&&(a[n.ID]=n.children,t(n.children,a))}return a}([this.test])[t.ID];t.expanded=!t.expanded,e&&e.length&&(e=Object(l.cloneDeep)(e).map(function(t){return s()({},t,{children:[]})}),t.children?(t._children=e,t.children=null):(t.children=e,t._children=null),this.update(t))},collapse1:function(t){t.children.forEach(function(t){t.children&&(t._children=t.children,t.children=null)}),this.update(t)},gotoEmployeeCard:function(t){var e=t.Owner.SmartLink.Url;e.length&&this.$router.push(e)},gotoCompanyPage:function(t){var e=t.Owner.Company.SmartLink.Url;e.length&&this.$router.push(e)},gotoCompanyStaff:function(t){var e=this;this.$goTo("cfc.hr.list",null,null,function(a){e.$messageSend("cfc.hr.list.list","setWidgetParameters",s()({UseDefault:0},t.Company.SmartLink.Parameters)),a()})},wrapText:function(){}}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"chart"}},[e("svg",{attrs:{width:this.width+this.margin.right,height:this.staffHeight,viewBox:"0 0 "+(this.width+this.margin.right)+" "+this.staffHeight,preserveAspectRatio:"none"}},[e("g",{staticClass:"links",attrs:{transform:"translate(0,"+this.basicBarHeight/2+")"}})])])},staticRenderFns:[]};var h=a("VU/8")(m,p,!1,function(t){a("TLkZ")},null,null).exports,v={mixins:[r.a],components:{FuncStructureTree:h},data:function(){return{data:null}},created:function(){var t=this;this.$api.getFuncStructureTree().then(function(e){var a={Title:""};a.EmpCount=e.Boss.EmpCount,a.ID="sdlwd123167",a.SubordinateUnits=7,a.Owner={},a.Owner.ID="ldlsdowe3289dks",a.Owner.FIO=e.Boss.FIO,a.Owner.Position=e.Boss.Role,a.Owner.Photo=e.Boss.Photo,a.Owner.SmartLink=e.Boss.SmartLink,a.children=[],e.Clusters.forEach(function(t){var e={};e.Title=t.Name,e.ColorTheme=t.ColorTheme,e.ID=t.ID,e.EmpCount=t.EmpCount,e.SubordinateUnits=9,e.Owner={},e.Owner.FIO=t.Curator.FIO,e.Owner.Position=t.Curator.Role,e.Owner.ID=Object(l.uniqueId)(),e.Owner.Photo=t.Curator.Photo,e.Owner.SmartLink=t.Curator.SmartLink,e.Owner.Company=t.Curator.Company,e.children=[],a.children.push(e),t.Products.forEach(function(t){var a={};a.Title=t.ShortName,a.EmpCount=t.EmpCount,a.ColorTheme=t.ColorTheme,a.ID=t.ID,a.Icon=t.Icon,a.SubordinateUnits=2,a.Owner={},a.Owner.ID=Object(l.uniqueId)(),a.Owner.FIO=t.Owner.FIO,a.Owner.Position=t.Owner.Role,a.Owner.Photo=t.Owner.Photo,a.Owner.SmartLink=t.Owner.SmartLink,a.Owner.Company=t.Owner.Company,a.children=[],e.children.push(a);var r={Companies:[],ID:Object(l.uniqueId)()};t.Companies.forEach(function(t){var e={Company:{}};e.Company.ID=Object(l.uniqueId)(),e.Company.EmpCount=t.EmpCount,e.Company.ShortName=t.ShortName,e.Company.Logo=t.Logo,e.Company.SmartLink=t.SmartLink,e.Company.SmartLink.Parameters.CompanyIDs=[e.Company.SmartLink.Parameters.CompanyID],e.Company.SmartLink.Parameters.WorkNow=1,r.Companies.push(e)}),a.children.push(r)})}),t.data=a,t.loadComplete=!0})}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("widget",{attrs:{"is-load":this.loadComplete}},[e("template",{slot:"title"},[this._v(this._s(this.$tree.Title))]),this._v(" "),e("div",{staticClass:"widget__body"},[e("div",{staticClass:"cit-panel"},[e("func-structure-tree",{attrs:{"chart-data":this.data}})],1)])],2)},staticRenderFns:[]};var b=a("VU/8")(v,g,!1,function(t){a("ZTsW")},"data-v-3f35e24c",null);e.default=b.exports},"1QDk":function(t,e,a){var r=a("tv3T"),n=a("09Qt");t.exports=function(t,e){return r(t,n(t),e)}},"2N6f":function(t,e,a){var r=a("rCVp"),n=a("Q2wK"),s=a("WHce");t.exports=function(t){return s(n(t,void 0,r),t+"")}},"3qr3":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("//Fk"),n=a.n(r),s=a("32fN"),i=a("MHaV"),o=a("O4Lo"),l=a.n(o),c={mixins:[i.a],components:{staffChanges:s.a},data:function(){return{Filters:{Companies:[]},Parameters:{CompanyIDs:[],UseDefault:1},historyChange:[],progress:""}},created:function(){var t=this;n.a.all([this.fetchData(this.Parameters),this.$api.getStaffCountHistoryFilters()]).then(function(e){t.Parameters=e[0].Parameters,t.Filters=e[1],t.loadComplete=!0})},methods:{fetchData:function(t){var e=this;return this.progress=this.loadComplete?"pending":"",this.$api.getStaffCountHistory(t).then(function(t){return e.historyChange=t.Data,e.progress="",t})},handleChangeOnSelect:l()(function(){this.fetchData(this.Parameters)},500)}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("widget",{attrs:{"is-load":t.loadComplete,progress:t.progress}},[a("template",{slot:"title"},[t._v(t._s(t.$tree.Title))]),t._v(" "),a("div",{staticClass:"widget__body"},[a("div",{staticClass:"uk-grid"},[a("div",{staticClass:"uk-width-large-2-3 uk-width-xlarge-3-4"},[a("staffChanges",{attrs:{history:t.historyChange}})],1),t._v(" "),a("div",{staticClass:"uk-width-large-1-3 uk-width-xlarge-1-4"},[a("form",{staticClass:"uk-form-stacked"},[a("div",{staticClass:"uk-form-row"},[a("div",{staticClass:"uk-form-label"},[t._v("Организация")]),t._v(" "),a("div",{staticClass:"uk-form-controls"},[a("el-select",{attrs:{placeholder:"",multiple:"","collapse-tags":""},on:{change:t.handleChangeOnSelect},model:{value:t.Parameters.CompanyIDs,callback:function(e){t.$set(t.Parameters,"CompanyIDs",e)},expression:"Parameters.CompanyIDs"}},t._l(t.Filters.Companies,function(e){return a("el-option",{key:e.CompanyID,attrs:{label:e.Name,value:e.CompanyID}},[a("span",{staticClass:"svg-icon svg-w-16",domProps:{innerHTML:t._s(e.Icon)}}),t._v(" "),a("span",[t._v(t._s(e.Name))])])}))],1)])])])])])],2)},staticRenderFns:[]},u=a("VU/8")(c,d,!1,null,null,null);e.default=u.exports},"5/Qr":function(t,e,a){var r=a("Kzd6"),n=a("6Git"),s=a("WyC4"),i=a("0uX4"),o=a("Ilb/"),l="[object Boolean]",c="[object Date]",d="[object Map]",u="[object Number]",f="[object RegExp]",m="[object Set]",p="[object String]",h="[object Symbol]",v="[object ArrayBuffer]",g="[object DataView]",b="[object Float32Array]",y="[object Float64Array]",_="[object Int8Array]",C="[object Int16Array]",x="[object Int32Array]",w="[object Uint8Array]",k="[object Uint8ClampedArray]",D="[object Uint16Array]",S="[object Uint32Array]";t.exports=function(t,e,a){var P=t.constructor;switch(e){case v:return r(t);case l:case c:return new P(+t);case g:return n(t,a);case b:case y:case _:case C:case x:case w:case k:case D:case S:return o(t,a);case d:return new P;case u:case p:return new P(t);case f:return s(t);case m:return new P;case h:return i(t)}}},"6Git":function(t,e,a){var r=a("Kzd6");t.exports=function(t,e){var a=e?r(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}},"7ZQy":function(t,e){},"86tT":function(t,e,a){var r=a("gHOb"),n=a("UnEC"),s="[object Map]";t.exports=function(t){return n(t)&&r(t)==s}},"8gK5":function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var a in Object(t))e.push(a);return e}},"9UkZ":function(t,e,a){var r=a("aCM0"),n=a("vi0E"),s=a("UnEC"),i="[object Object]",o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,u=c.call(Object);t.exports=function(t){if(!s(t)||r(t)!=i)return!1;var e=n(t);if(null===e)return!0;var a=d.call(e,"constructor")&&e.constructor;return"function"==typeof a&&a instanceof a&&c.call(a)==u}},AS2r:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("woOf"),n=a.n(r),s=a("Dd8w"),i=a.n(s),o=a("bOdI"),l=a.n(o),c=a("Q7hp"),d=a.n(c),u={props:{data:{type:Array,default:function(){return[]}},sort:{type:Object,default:function(){return{}}},mobile:Boolean},methods:{createBody:function(t){var e=this.$createElement;return e("div",{class:"dtable-body"},[this.data.map(function(a){return e("smart-link",{attrs:{"smart-link":a.SmartLink},class:"dtable-row"},[t.map(function(t){return e("div",{attrs:i()({},t.attrs),class:l()({},t.staticClass,t.staticClass)},t.scopedSlot?t.scopedSlot(a[t.name]):a[t.name])})])})])},createHead:function(t){var e=this,a=this.$createElement;return a("div",{class:"dtable-head"},[a("div",{class:"dtable-row"},[t.map(function(t){var r=a("span",{class:{"th-title":!0}},t.label),n=t.columnAttrs||{},s=e.sort.SortField===t.name?"th-active":"",o=e.sort.SortField===t.name&&e.sort.SortOrder?"th-reverse":"";return a("div",{style:i()({},n.style),class:[n.class,s,o],on:{click:function(){e.$emit("sort-change",t.name)}}},[r])})])])},createMobileSort:function(t){var e=this,a=this.$createElement;return t=t.filter(function(t){return t.mobileSort}),a("div",{class:"mobile-sortable"},[a("div",{class:"flex-y-center my-10"},[a("span",{class:"mb-15 mr-15"},["Сортировка по:"]),a("el-button-group",{class:"mb-20"},[t.map(function(t){return a("el-button",{on:{click:function(){return e.$emit("sort-change",t.name)}},attrs:{size:"small",round:!0},class:{"el-button--white":!0,"is-active":t.name===e.sort.SortField,"reverse-sort":t.name===e.sort.SortField&&e.sort.SortOrder}},[t.label,t.name===e.sort.SortField?a("i",{class:"el-icon-caret-top"}):""])})])])])}},render:function(){var t=arguments[0],e=this.$slots.default.filter(function(t){return t.tag&&-1!==t.tag.indexOf("table-column")}).map(function(t){var e=t.data;return n()({},t.componentOptions.propsData,{scopedSlot:d()(t,"data.scopedSlots.default")},{attrs:e.attrs,staticClass:e.staticClass})}),a=this.createBody(e),r=this.createHead(e);return t("div",{class:"dtable-scroll"},[this.createMobileSort(e),t("div",{class:{"dtable-mobile":this.mobile,"dtable-striped":!0,"dtable-sortable":!0,"text-small":!0}},[r,a])])}},f=a("VU/8")(u,null,!1,null,null,null).exports,m={name:"table-column",props:{name:String,label:String,columnAttrs:Object,mobileSort:Boolean}},p=a("VU/8")(m,null,!1,null,null,null).exports,h=a("2247"),v=a.n(h),g=a("MHaV"),b=a("fZjL"),y=a.n(b),C=a("Gu7T"),x=a.n(C),w=a("mvHQ"),k=a.n(w),D=a("Dc7M"),S=a.n(D),P=a("O4Lo"),I=a.n(P),T=a("hygk"),O=a.n(T),L=a("w9Mt"),F=a.n(L),M=a("4yG7"),H=a.n(M),E=a("kvU2"),N=a.n(E),j=a("+X65"),U=function(t){return JSON.parse(k()(t))},$={data:function(){return{fieldsLastItem:{},data:[],total:0,progress:"",dataLoad:!1,filterLoad:!1,extended:!1,scrollLoading:!1}},watch:{isLoad:function(t){t&&!this.loadComplete&&(this.loadComplete=!0)},isFilled:function(t){this.extended=t}},mounted:function(){var t=this;this.getData(this.parameters).then(function(e){t.filterLoad||t.setParameters(e.Parameters),t.listenParameters()}).catch(this.listenParameters),this.getFilters().then(function(e){t.dataLoad||t.setParameters(e.Parameters)}),this.addListen()},deactivated:function(){this.removeListen()},activated:function(){this.addListen()},beforeDestroy:function(){this.removeListen()},methods:{addListen:function(){window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleScroll),window.addEventListener("orientationchange",this.handleScroll)},removeListen:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleScroll),window.removeEventListener("orientationchange",this.handleScroll)},handleScroll:a.n(j)()(function(){var t=this;if(!this.scrollLoading&&this.total>this.data.length){var e=window.pageYOffset||(document.documentElement?document.documentElement.scrollTop:0),a=document.body?document.body.offsetHeight:0;e+window.innerHeight>=a-450&&(this.scrollLoading=!0,this.getData(i()({},this.parameters,this.idsLastItem),!0).then(function(){t.$nextTick(function(){t.scrollLoading=!1})}))}},200),getData:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.progress=this.loadComplete?"pending":"",this.$api[this.dMethod](t).then(function(r){return 1===t.UseDefault&&e.setParameters(r.Parameters),1===t.UseDefault?setTimeout(function(){e.total=r.Total},1e3):e.total=r.Total,e.parameters.Sort=r.Parameters.Sort,e.parameters.ViewMode=r.Parameters.ViewMode,e.data=a?e.data.concat(r.Data):r.Data,e.dataLoad=!0,e.progress="",r}).catch(function(t){throw e.progress="",new Error(t)})},handleSort:function(t){H()(this.parameters,this.sortPath,{SortField:t,SortOrder:t===this.sort.SortField?Number(!this.sort.SortOrder):0})},debouncedGetData:I()(function(t){this.getData(t)},500),getFilters:function(){var t=this;return this.$api[this.fMethod]().then(function(e){return n()(t.filters,e),t.filterLoad=!0,e})},setParameters:function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return n.a.apply(Object,[this.parameters].concat(x()(e),[{UseDefault:0}]))},setWidgetParameters:function(t){this.setParameters(this.$api[this.dMethod].defaultParameters,t)},listenParameters:function(){var t=this;this.$watch(function(){return t.computeParameters},function(e,a){O()(U(e),U(a))||("function"==typeof t.beforeRequest?t.beforeRequest(e,a,function(e){t.setParameters(e),t.debouncedGetData(e)}):t.debouncedGetData(e))},{deep:!0})},clearListenFormParams:function(){this.setParameters(F()(this.$api[this.dMethod].defaultParameters,this.extendFormParams)),this.$notify({title:"Внимание",message:"Скрытые поля очищены",type:"info",duration:1500})},handleClickOnExtendBtn:function(){this.isFilled&&this.clearListenFormParams(),this.extended=!this.extended}},computed:{isFilled:function(){return Boolean(_.chain(this.parameters).pick(this.extendFormParams).values().compact().value().length)},idsLastItem:function(){var t=this,e=this.data,a=e[e.length-1],r=e.length&&e.length!==this.total;return a&&r?y()(this.fieldsLastItem).reduce(function(e,r){return e[r]=a[t.fieldsLastItem[r]],e},{}):{}},computeParameters:function(){return N()(S()(this.parameters,y()(this.fieldsLastItem).concat(["Sort","ViewMode"])))},isLoad:function(){return this.dataLoad&&this.filterLoad},sortPath:function(){return""},sort:function(){return this.sortPath?d()(this.parameters,this.sortPath):this.parameters}}},V=a("1Nao"),A=a("orGD"),B={props:{active:Boolean}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-tooltip",{attrs:{effect:"light",content:"Расширенный поиск",placement:"top"}},[e("el-button",{class:{"is-active":this.active},attrs:{plain:""},domProps:{innerHTML:this._s(a("bMSM"))}})],1)},staticRenderFns:[]},Q=a("VU/8")(B,R,!1,null,null,null).exports,Y=a("Saf3"),G=a("HOd6"),W=a("Gf9Z"),z=a("pA0T"),q=a("12WN"),Z=a("0xDb"),J={name:"StaffCard",props:["card"],methods:{isNotNullPhoto:function(t){return null===t||void 0===t||!t.length}},computed:{isFired:function(){return"0001-01-01T00:00:00"!==this.card.FireDate},coloredIcon:function(){return Object(Z.f)(a("QEg/"),Z.g.clusterTheme.get("theme-"+(this.isFired?"gray_middle":"green")))}}},K={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-20"},[r("smart-link",{attrs:{"custom-class":"panel-box panel-dynamic","smart-link":t.card.SmartLink}},[r("div",{staticClass:"flex-nowrap"},[t.isNotNullPhoto(t.card.Photo)?[r("div",{staticClass:"staff-img non-img",domProps:{innerHTML:t._s(a("lPgw"))}})]:[r("div",{staticClass:"staff-img"},[r("img",{staticClass:"uk-border-circle",attrs:{src:"data:image/jpeg;base64,"+t.card.Photo,alt:"Фото сотрудника"}})])],t._v(" "),r("div",[r("div",{staticClass:"staff-name"},[t._v(t._s(t.card.FIO))]),t._v(" "),r("div",{staticClass:"text-muted mt-5"},[t._v(t._s(t.card.CompanyName))])])],2),t._v(" "),r("div",t._l(t.card.Products,function(e,a){return r("span",{key:a,staticClass:"svg-icon",class:"text-"+e.ColorTheme},[r("span",{class:"svg-"+e.ColorTheme,domProps:{innerHTML:t._s(e.Icon)}}),t._v(" "),r("span",[t._v(t._s(e.Name))])])})),t._v(" "),r("el-tooltip",{attrs:{content:t.isFired?"Уволившийся":"Работает",placement:"top"}},[r("span",{staticClass:"svg-w-12",domProps:{innerHTML:t._s(t.coloredIcon)}})])],1)],1)},staticRenderFns:[]},X=a("VU/8")(J,K,!1,null,null,null).exports,tt=a("QEg/"),et=a.n(tt),at={mixins:[g.a,$],components:{productSelect:V.a,autocomplete:A.a,clearSearchBtn:Y.a,callPicker:G.a,loadCmpn:W.a,flTable:f,flTableColumn:p,personCard:X,swingNumber:q.a,extendFormButton:Q,toggleView:z.a},data:function(){return{parameters:i()({},this.$api.getStaff.defaultParameters),filters:{Products:[],Companies:[],Works:[{Name:"Работающие",ID:1},{Name:"Уволившиеся",ID:3}]},fMethod:"getStaffFilters2",dMethod:"getStaff",fieldsLastItem:{LastItemID:"EmpID"},extendFormParams:["DepartmentID","GOSID","DateFrom","DateTo","FireDateFrom","FireDateTo","IncludeSubDepartments"],sortFields:[{name:"ФИО",field:"FIO"},{name:"Организация",field:"CompanyName"},{name:"Продукт / Сервис",field:"ProductName"}]}},created:function(){this.parameters.Sort.card.SortField||this.parameters.Sort.card.SortField||(this.parameters.ViewMode=""),this.parameters.Sort.table.SortField||(this.parameters.Sort.table.SortOrder=""),this.parameters.Sort.card.SortField||(this.parameters.Sort.card.SortOrder="")},activated:function(){this.parameters.Sort.table.SortField||(this.parameters.Sort.table.SortOrder=""),this.parameters.Sort.card.SortField||(this.parameters.Sort.card.SortOrder=""),this.parameters.Sort.card.SortField||this.parameters.Sort.table.SortField||(this.parameters.ViewMode="",this.debouncedGetData(n()({},this.parameters,{ViewMode:""})),this.isFilled||(this.extended=!1))},methods:{clearfix:function(){this.extended=!1},handleChangeDate:function(t,e){n()(this.parameters,{DateFrom:t,DateTo:e})},handleChangeFire:function(t,e){n()(this.parameters,{FireDateFrom:t,FireDateTo:e})},handleSort:function(t){_.findIndex(this.sortFields,function(e){return e.field===t})<0?H()(this.parameters,this.sortPath,{SortField:t,SortOrder:t===this.sort.SortField?Number(!this.sort.SortOrder):0}):"Sort.card"===this.sortPath?(this.parameters.Sort.table.SortField=t,this.parameters.Sort.table.SortOrder=this.parameters.Sort.card.SortOrder?0:1,this.parameters.Sort.card.SortField=t,this.parameters.Sort.card.SortOrder=this.parameters.Sort.card.SortOrder?0:1):(this.parameters.Sort.table.SortField=t,this.parameters.Sort.table.SortOrder=this.parameters.Sort.table.SortOrder?0:1,this.parameters.Sort.card.SortField=t,this.parameters.Sort.card.SortOrder=this.parameters.Sort.table.SortOrder?1:0),this.debouncedGetData(this.parameters)},changeView:function(){this.debouncedGetData(this.parameters)},beforeRequest:function(t,e,a){var r=t;t.CompanyIDs.length||(r.DepartmentID="",r.DepartmentName="",r.GOSID=""),r.DepartmentID.length||(r.IncludeSubDepartments=0),a(r)},statusIcon:function(t){var e="0001-01-01T00:00:00"===t;return Object(Z.f)(et.a,Z.g.clusterTheme.get("theme-"+(e?"green":"gray_middle"))||"#000000")}},computed:{sortPath:function(){return"Sort."+this.parameters.ViewMode},activeCompany:function(){var t=this;return this.filters.Companies.filter(function(e){return-1!==t.parameters.CompanyIDs.indexOf(e.CompanyID)})||[]},Goses:function(){return this.activeCompany.length?this.activeCompany.reduce(function(t,e){return t.concat(e.GosWork)},[]):[]},Departments:function(){return 1===this.activeCompany.length?v()(this.activeCompany[0].Departments,function(t){return{ID:t.DepartmentID,Name:t.Name}}).sort(function(t,e){return t.Name.localeCompare(e.Name)}):[]}}},rt={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("widget",{attrs:{"is-load":!0,progress:t.progress}},[r("template",{slot:"title"},[t._v("\n    "+t._s(t.$tree.Title)+"\n    "),r("swing-number",{attrs:{number:t.total,badge:""}})],1),t._v(" "),r("template",{slot:"right-panel"},[r("div",{staticClass:"flex-y-center"},[r("clear-search-btn",{attrs:{parameters:t.parameters},on:{change:t.clearfix}}),t._v(" "),r("extend-form-button",{attrs:{active:t.extended},nativeOn:{click:function(e){return t.handleClickOnExtendBtn(e)}}}),t._v(" "),r("toggle-view",{attrs:{"left-label":a("80B9"),"right-label":a("VsnI"),"left-api":"table","right-api":"card"},on:{change:t.changeView},model:{value:t.parameters.ViewMode,callback:function(e){t.$set(t.parameters,"ViewMode",e)},expression:"parameters.ViewMode"}})],1)]),t._v(" "),r("div",{staticClass:"widget__body"},[t.filterLoad?r("form",{staticClass:"uk-form-stacked"},[r("div",{staticClass:"uk-grid"},[r("div",{staticClass:"mb-20 uk-width-medium-1-3 uk-width-large-1-4"},[r("div",{staticClass:"uk-form-row"},[r("label",{staticClass:"uk-form-label",attrs:{for:""}},[t._v("Продукт / сервис")]),t._v(" "),r("product-select",{attrs:{products:t.filters.Products},model:{value:t.parameters.ProductID,callback:function(e){t.$set(t.parameters,"ProductID",e)},expression:"parameters.ProductID"}})],1)]),t._v(" "),r("div",{staticClass:"mb-20 uk-width-medium-1-3 uk-width-large-1-4"},[r("div",{staticClass:"uk-form-row"},[r("label",{staticClass:"uk-form-label",attrs:{for:""}},[t._v("Статус сотрудников")]),t._v(" "),r("el-select",{attrs:{placeholder:"",clearable:""},model:{value:t.parameters.WorkNow,callback:function(e){t.$set(t.parameters,"WorkNow",e)},expression:"parameters.WorkNow"}},t._l(t.filters.Works,function(t){var e=t.ID,a=t.Name;return r("el-option",{key:e,attrs:{label:a,value:e}})}))],1)]),t._v(" "),r("div",{staticClass:"mb-20 uk-width-medium-1-3 uk-width-large-1-4"},[r("div",{staticClass:"uk-form-row"},[r("label",{staticClass:"uk-form-label",attrs:{for:""}},[t._v("Организация")]),t._v(" "),r("el-select",{attrs:{placeholder:"",multiple:"","collapse-tags":"",clearable:""},model:{value:t.parameters.CompanyIDs,callback:function(e){t.$set(t.parameters,"CompanyIDs",e)},expression:"parameters.CompanyIDs"}},t._l(t.filters.Companies,function(e){return r("el-option",{key:e.CompanyID,attrs:{label:e.Name,value:e.CompanyID}},[r("span",{staticClass:"svg-icon svg-w-16"},[e.Icon?r("span",{domProps:{innerHTML:t._s(e.Icon)}}):r("span",{staticClass:"svg-theme-gray_dark",domProps:{innerHTML:t._s(a("lHUk"))}})]),t._v(" "),r("span",[t._v(t._s(e.Name))])])}))],1)]),t._v(" "),r("div",{staticClass:"mb-20 uk-width-medium-1-3 uk-width-large-1-4"},[r("div",{staticClass:"uk-form-row"},[r("label",{staticClass:"uk-form-label",attrs:{for:""}},[t._v("Поиск по ФИО")]),t._v(" "),r("autocomplete",{attrs:{signature:"cfc.hr.person","search-param":t.parameters},model:{value:t.parameters.SearchString,callback:function(e){t.$set(t.parameters,"SearchString",e)},expression:"parameters.SearchString"}})],1)]),t._v(" "),t.extended?[r("div",{staticClass:"mb-20 uk-width-medium-1-3 uk-width-large-1-4"},[r("div",{staticClass:"uk-form-row"},[r("label",{staticClass:"uk-form-label",attrs:{for:""}},[t._v("Подразделение")]),t._v(" "),r("el-select",{attrs:{disabled:!t.Departments.length,placeholder:"",clearable:""},model:{value:t.parameters.DepartmentID,callback:function(e){t.$set(t.parameters,"DepartmentID",e)},expression:"parameters.DepartmentID"}},t._l(t.Departments,function(t){var e=t.Name,a=t.ID;return r("el-option",{key:a,attrs:{label:e,value:a}})}))],1)]),t._v(" "),r("div",{staticClass:"mb-20 uk-width-medium-1-3 uk-width-large-1-4"},[r("div",{staticClass:"uk-form-row"},[r("label",{staticClass:"uk-form-label",attrs:{for:""}},[t._v("Работа ГЗ")]),t._v(" "),r("el-select",{attrs:{placeholder:"",disabled:!t.Goses.length,clearable:""},model:{value:t.parameters.GOSID,callback:function(e){t.$set(t.parameters,"GOSID",e)},expression:"parameters.GOSID"}},t._l(t.Goses,function(t){var e=t.WorkName,a=t.WorkID;return r("el-option",{key:a,attrs:{label:e,value:a}})}))],1)]),t._v(" "),r("div",{staticClass:"mb-20 uk-width-medium-1-3 uk-width-large-1-4"},[r("div",{staticClass:"uk-form-row"},[r("label",{staticClass:"uk-form-label",attrs:{for:""}},[t._v("Дата приема")]),t._v(" "),r("call-picker",{attrs:{date:{date_from:t.parameters.DateFrom,date_to:t.parameters.DateTo}},on:{"range-change":t.handleChangeDate}})],1)]),t._v(" "),r("div",{staticClass:"mb-20 uk-width-medium-1-3 uk-width-large-1-4"},[r("div",{staticClass:"uk-form-row"},[r("label",{staticClass:"uk-form-label",attrs:{for:""}},[t._v("Дата увольнения")]),t._v(" "),r("call-picker",{attrs:{disabled:1===t.parameters.WorkNow,date:{date_from:t.parameters.FireDateFrom,date_to:t.parameters.FireDateTo}},on:{"range-change":t.handleChangeFire}})],1)]),t._v(" "),r("div",{staticClass:"mb-20 uk-width-medium-1-3 uk-width-large-1-4 uk-text-small"},[r("div",{staticClass:"uk-form-row"},[r("el-checkbox",{attrs:{disabled:!t.Departments.length||!t.parameters.DepartmentID.length,"true-label":1,"false-label":0},model:{value:t.parameters.IncludeSubDepartments,callback:function(e){t.$set(t.parameters,"IncludeSubDepartments",e)},expression:"parameters.IncludeSubDepartments"}},[t._v("\n                Включая подчиненные организации\n              ")])],1)])]:t._e()],2)]):t._e(),t._v(" "),t.filterLoad&&!t.dataLoad?r("hr",{staticClass:"hr-indented mt-0"}):t._e(),t._v(" "),t.filterLoad&&t.dataLoad?t._e():r("load-cmpn",{attrs:{height:"150"}}),t._v(" "),t.filterLoad&&t.dataLoad?r("hr",{staticClass:"hr-indented mt-0"}):t._e(),t._v(" "),!t.filterLoad&&t.dataLoad?r("hr",{staticClass:"hr-indented mt-0"}):t._e(),t._v(" "),t.dataLoad?[r("non-data-stub",{attrs:{"stub-data":t.data,stub:"filter"}},["table"===t.parameters.ViewMode?r("fl-table",{attrs:{mobile:"",sort:{SortField:t.sort.SortField,SortOrder:t.sort.SortOrder},data:t.data},on:{"sort-change":t.handleSort}},[r("fl-table-column",{staticClass:"table__td--status",attrs:{"column-attrs":{style:{width:"30px"},class:"table__th--status"},name:"FireDate","data-label":"Статус"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tooltip",{attrs:{placement:"top",content:"0001-01-01T00:00:00"===e?"Работает":"Уволившийся"}},[r("span",{staticClass:"svg-w-12",domProps:{innerHTML:t._s(t.statusIcon(e))}},[t._v("}")])])]}}])}),t._v(" "),r("fl-table-column",{staticClass:"table-staff__th--fio",attrs:{"column-attrs":{style:{width:"250px"}},name:"FIO",label:"ФИО","mobile-sort":!0,"data-label":"ФИО"}}),t._v(" "),r("fl-table-column",{staticClass:"table-staff__th--company",attrs:{"column-attrs":{style:{width:"160px"}},name:"Position",label:"Должность","data-label":"Должность"}}),t._v(" "),r("fl-table-column",{attrs:{name:"DepartmentName","data-label":"Подразделение",label:"Подразделение"}}),t._v(" "),r("fl-table-column",{staticClass:"table-staff__th--company",attrs:{"column-attrs":{style:{width:"130px"}},name:"CompanyName",label:"Организация","data-label":"Организация","mobile-sort":!0}}),t._v(" "),r("fl-table-column",{staticClass:"table-staff__th--product",attrs:{"column-attrs":{style:{width:"130px"}},name:"ProductName",label:"Продукт / Сервис","mobile-sort":!0,"data-label":"Продукт / Сервис"}}),t._v(" "),r("fl-table-column",{attrs:{"column-attrs":{style:{width:"120px"}},name:"HireDate","data-label":"Дата приема",label:"Дата приема"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t._f("formatDate")(e))+"\n            ")]}}])}),t._v(" "),r("fl-table-column",{attrs:{"column-attrs":{style:{width:"130px"}},name:"FireDate","data-label":"Дата увольнения",label:"Дата увольнения"},scopedSlots:t._u([{key:"default",fn:function(e){return["0001-01-01T00:00:00"!==e?[t._v("\n                "+t._s(t._f("formatDate")(e))+"\n              ")]:t._e()]}}])})],1):t._e(),t._v(" "),"card"===t.parameters.ViewMode?[t.sortFields?r("div",{staticClass:"flex-y-center my-10"},[r("span",{staticClass:"mb-15 mr-15"},[t._v("Сортировка по:")]),t._v(" "),r("el-button-group",{staticClass:"mb-15"},t._l(t.sortFields,function(e){return r("el-button",{key:e.field,staticClass:"el-button--white",class:{"el-button--white":!0,"is-active":e.field===t.sort.SortField,"reverse-sort":e.field===t.sort.SortField&&t.sort.SortOrder},attrs:{round:"",size:"small"},on:{click:function(a){t.handleSort(e.field)}}},[t._v("\n                "+t._s(e.name)+"\n                "),e.field===t.sort.SortField?r("i",{staticClass:"el-icon-caret-top"}):t._e()])}))],1):t._e(),t._v(" "),r("div",{staticClass:"uk-grid uk-grid-match uk-grid-width-medium-1-2 uk-grid-width-large-1-3 uk-grid-width-xxlarge-1-4"},t._l(t.data,function(t){return r("person-card",{key:t.EmpID,attrs:{card:t}})}))]:t._e(),t._v(" "),t.scrollLoading?r("div",{staticClass:"data-loader my-20"},[r("i",{staticClass:"el-icon-loading"})]):t._e()],2)]:t._e()],2)],2)},staticRenderFns:[]},nt=a("VU/8")(at,rt,!1,null,null,null);e.default=nt.exports},AuFA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),s=a("Dd8w"),i=a.n(s),o=a("exGp"),l=a.n(o),c=a("woOf"),d=a.n(c),u=a("MHaV"),f=a("qS0a"),m={mixins:[u.a],data:function(){return{total:0,contracts:[],progress:"",parameters:{Url:this.url,SortField:"",SortOrder:"",UseDefault:1,ItemCount:6,LastItemID:""},tableHeaders:[{name:"Код СПУ",width:"80px",fieldName:"SPUCode"},{name:"Номер",width:"100px",fieldName:"Number"},{name:"Наименование",fieldName:"ContractName"},{name:"Продукт / сервис",width:"130px",fieldName:"ProductName"},{name:"Заказчик",width:"120px",fieldName:"CompanyName"},{name:"Поставщик",width:"120px",fieldName:"ExecutorName"},{name:"Роль сотрудника",width:"130px",fieldName:"Role"},{name:"Статус",width:"90px",fieldName:"StateName"},{name:"Сумма, тыс.руб.",width:"130px",fieldName:"Summ",class:"text-right"}]}},computed:{lastId:function(){var t=this.contracts;return{LastItemID:t.length!==this.total&&t.length?t[t.length-1].ContractID:""}}},created:function(){this.fetch()},methods:{handleSort:function(t){d()(this.parameters,{SortField:t,SortOrder:t===this.parameters.SortField?Number(!this.parameters.SortOrder):0}),this.fetch({LastItemID:""})},loadMore:function(){this.fetch()},hide:function(){this.fetch({LastItemID:""})},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i()({},this.lastId);return l()(n.a.mark(function a(){var r,s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.progress=t.loadComplete?"pending":"",a.prev=1,r=d()({},t.parameters,e),a.next=5,t.$api.getEmplyeeContracts(r);case 5:s=a.sent,t.contracts=r.LastItemID?t.contracts.concat(s.Data):s.Data,t.parameters.UseDefault&&(t.parameters=i()({},s.Parameters,{UseDefault:0}),t.total=s.Total),t.loadComplete=!0,t.progress="",a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),t.loadComplete=!0,t.progress="";case 16:case"end":return a.stop()}},a,t,[[1,12]])}))()}},components:{MoreHideBtn:f.a}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("widget",{attrs:{"is-load":t.loadComplete,progress:t.progress}},[a("template",{slot:"title"},[t._v(t._s(t.$tree.Title)+" "),a("span",{staticClass:"badge-text"},[t._v(t._s(t.total))])]),t._v(" "),a("div",{staticClass:"widget__body"},[a("non-data-stub",{attrs:{stub:"text","stub-data":t.contracts}},[a("div",{staticClass:"dtable-scroll"},[a("div",{staticClass:"dtable-mobile dtable-striped dtable-sortable text-small"},[a("div",{staticClass:"dtable-head"},[a("div",{staticClass:"dtable-row"},t._l(t.tableHeaders,function(e){return a("div",{key:e.name,class:[{"th-active":e.fieldName===t.parameters.SortField,"th-reverse":Boolean(t.parameters.SortOrder)},e.class],style:{width:e.width},on:{click:function(a){t.handleSort(e.fieldName)}}},[a("span",{staticClass:"th-title"},[t._v(t._s(e.name))])])}))]),t._v(" "),a("div",{staticClass:"dtable-body"},t._l(t.contracts,function(e,r){return a("permission-link",{key:e.ContractID+r,staticClass:"dtable-row",attrs:{signature:"cfc.contracts.detail",params:{url:e.ContractURL}}},[a("div",{attrs:{"data-label":"Код СПУ"}},[t._v(t._s(e.SPUCode))]),t._v(" "),a("div",{attrs:{"data-label":"Номер"}},[t._v(t._s(e.Number))]),t._v(" "),a("div",{attrs:{"data-label":"Наименование"}},[t._v(t._s(e.ContractName))]),t._v(" "),a("div",{staticClass:"text-break",attrs:{"data-label":"Продукт / сервис"}},[t._v(t._s(e.ProductName))]),t._v(" "),a("div",{staticClass:"text-break",attrs:{"data-label":"Заказчик"}},[t._v(t._s(e.CompanyName))]),t._v(" "),a("div",{staticClass:"text-break",attrs:{"data-label":"Поставщик"}},[t._v(t._s(e.ExecutorName))]),t._v(" "),a("div",{attrs:{"data-label":"Роль сотрудника"}},[t._v(t._s(e.Role))]),t._v(" "),a("div",{attrs:{"data-label":"Статус"}},[t._v(t._s(e.StateName))]),t._v(" "),a("div",{staticClass:"text-right",attrs:{"data-label":"Сумма, тыс.руб."}},[t._v(t._s(t._f("formatNumber")(e.Summ,1)))])])}))])])]),t._v(" "),a("MoreHideBtn",{attrs:{count:t.contracts.length,total:t.total,loading:"pending"===t.progress,"custom-class":"mt-20"},on:{more:t.loadMore,hide:t.hide}})],1)],2)},staticRenderFns:[]},h=a("VU/8")(m,p,!1,null,null,null);e.default=h.exports},CHen:function(t,e,a){var r=a("uCi2"),n=a("HAGj"),s=a("bIjD");t.exports=function(t,e,a){for(var i=-1,o=e.length,l={};++i<o;){var c=e[i],d=r(t,c);a(d,c)&&n(l,s(c,t),d)}return l}},Cf65:function(t,e,a){var r=a("uCi2"),n=a("M1c9");t.exports=function(t,e){return e.length<2?t:r(t,n(e,0,-1))}},Dc7M:function(t,e,a){var r=a("Hxdr"),n=a("Fkvj"),s=a("Vi3P"),i=a("bIjD"),o=a("tv3T"),l=a("dYhQ"),c=a("2N6f"),d=a("xond"),u=c(function(t,e){var a={};if(null==t)return a;var c=!1;e=r(e,function(e){return e=i(e,t),c||(c=e.length>1),e}),o(t,d(t),a),c&&(a=n(a,7,l));for(var u=e.length;u--;)s(a,e[u]);return a});t.exports=u},DiZC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Dd8w"),n=a.n(r),s=a("woOf"),i=a.n(s),o=a("Gu7T"),l=a.n(o),c=a("nER5"),d=a.n(c),u=a("w+eW"),f=a.n(u),m=a("0xDb"),p={name:"HistoryChar",props:["historyUsage"],data:function(){return{series:[],colors:[],chart:""}},mounted:function(){this.colors=this.historyUsage.map(function(t){return t.ColorTheme}).map(function(t){return m.g.clusterTheme.get(t)});var t=function(t){return[(e=t.Month,+f()(e,"MM.YYYY").startOf("month").add(25,"hours").format("x")),t.Value];var e},e=function(t){return t.reduce(function(t,e,a,r){var n=(r.find(function(t){return t[0]>e[0]})||[0,0])[0],s=f()(e[0]),i=f()(n).diff(s,"months");if(t.push(e),i>1){var o=[];o.length=i-1,o=o.fill("").map(function(t,e){return[+s.add(e+1,"month").format("x"),null]}),t.push.apply(t,l()(o))}return t},[])};this.series=function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return function(t){return e.reduce(function(t,e){return e(t)},t)}}(function(e){return e.map(function(e,a){return{name:e.ShortName,step:!0,treshhold:150*a,data:e.Values.map(t)||[]}})},function(t){return t.reduce(function(t,e){return t.concat.apply(t,l()(e.data.map(function(t){return{date:t[0],val:t[1],name:e.name,treshhold:e.treshhold}})))},[])},function(t){var e=i()([],t).sort(function(t,e){return t.date-e.date});return t.reduce(function(t,a,r,s){var i=e.filter(function(t){return t.date===+f()(a.date).add(1,"month").format("x")}),o=void 0;if((i.filter(function(t){return t.name!==a.name})||[]).length){var l=e.filter(function(t){return t.name===i[0].name}),c=l.indexOf(i[0]);o=0===c||l[c-1]&&f()(i[0].date).diff(l[c-1].date,"months")>1}var d=o;return t.push(a),d&&t.push(n()({},a,{date:+f()(a.date).add(1,"month").format("x"),val:null})),t},[])},function(t){return t.reduce(function(t,e){var a=t.findIndex(function(t){return t.name===e.name}),r=a>-1,s=r?t[a]:{};return s=n()({},s,{name:e.name,step:!0,threshold:e.treshhold,data:[].concat(l()(r?s.data:[]),[[e.date,e.val+e.treshhold]])}),r?t[a]=s:t.push(s),t},[])},function(t){return t.map(function(t){return n()({},t,{data:e(t.data)})})})(this.historyUsage),d.a.setOptions({lang:{decimalPoint:",",loading:"Загрузка...",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],shortMonths:["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сент","Окт","Нояб","Дек"],exportButtonTitle:"Экспорт",printButtonTitle:"Печать",rangeSelectorFrom:"С",rangeSelectorTo:"По",rangeSelectorZoom:"Период",downloadPNG:"Скачать PNG",downloadJPEG:"Скачать JPEG",downloadPDF:"Скачать PDF",downloadSVG:"Скачать SVG",printChart:"Напечатать график"}}),this.chart=d.a.stockChart("UsageHistoryChart",{rangeSelector:{inputEnable:!1,allButtonsEnabled:!1,enabled:!1,selected:4},chart:{type:"area",style:{fontFamily:m.a.fontFamily,color:m.a.fontColorMain,fontSize:m.a.fontSizeMain}},title:{text:"История занятости на продуктах и сервисах",style:{color:m.a.fontColorMain,fontSize:m.a.titleFontSize}},navigator:{series:{data:[]}},legend:{enabled:!0,layout:"horizontal",align:"center",verticalAlign:"bottom",itemMarginBottom:10,margin:20,itemStyle:{fontSize:m.a.legendFontSize,fontWeight:m.a.legendFontWeight,color:m.a.legendFontColor}},xAxis:{categories:this.series,type:"datetime",dateTimeLabelFormats:m.a.dateTimeLabelFormats,labels:{style:{fontSize:"12px",color:m.a.axisFontColor}}},yAxis:{labels:{enabled:!1},min:0},tooltip:{pointFormatter:function(){for(var t=this.y;t>100;)t-=150;return t=Math.round(t),'<span style="color:{'+this.series.color+'}">'+this.series.name+"</span>: <b>"+t+" %</b> <br/>"},valueDecimals:0,split:!0,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%d.%m.%Y",day:"%m.%Y",week:"%m.%Y",month:"%m.%Y",year:"%Y"},xDateFormat:"%m.%Y"},credits:{enabled:!1},plotOptions:{area:{connectNulls:!1,marker:{lineWidth:1,lineColor:"#ffffff"}}},colors:this.colors,series:this.series})}},h={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"UsageHistoryChart"}})},staticRenderFns:[]},v=a("VU/8")(p,h,!1,null,null,null).exports,g={mixins:[a("MHaV").a],data:function(){return{UsageView:"today",historyUsage:[],usedByProduct:[]}},created:function(){var t=this;this.$api.getEmployeeProducts({Slug:this.url}).then(function(e){var a=t.$store.getters["productsList/productsByIDs"];e.CurrentUsage.length&&(t.usedByProduct=e.CurrentUsage.map(function(t,r){var n=a[e.CurrentUsage[r].Product.ID];return{DateFrom:e.CurrentUsage[r].DateFrom,Part:e.CurrentUsage[r].Part,ProductIcon:n.Icon,ShortName:n.ShortName,ProductUrl:n.URLName,theme:n.ColorTheme}})),e.UsageHistory.length&&(t.historyUsage=e.UsageHistory.map(function(t,r){var n=a[e.UsageHistory[r].Product.ID];return{ProductIcon:n.Icon,ShortName:n.ShortName,ProductUrl:n.URLName,ColorTheme:n.ColorTheme,Values:t.Product.Values}})),t.loadComplete=!0}).catch(function(){t.loadComplete=!0})},components:{historyChart:v}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("widget",{attrs:{"grid-class":-1===t.allSignaturesInSegment.indexOf("cfc.hr.person.work")?"uk-width-xxlarge-1-1":"uk-width-xxlarge-1-2","is-load":t.loadComplete}},[a("template",{slot:"title"},[t._v(t._s(t.$tree.Title))]),t._v(" "),a("toggle-view",{attrs:{slot:"toggle-view","left-label":"Текущая занятость","right-label":"История занятости","left-api":"today","right-api":"history"},slot:"toggle-view",model:{value:t.UsageView,callback:function(e){t.UsageView=e},expression:"UsageView"}}),t._v(" "),"today"===t.UsageView?a("div",{staticClass:"widget__body pb-0"},[a("non-data-stub",{attrs:{stub:"text","stub-class":"mb-20","stub-data":t.usedByProduct}},[a("div",{staticClass:"uk-grid uk-grid-match uk-grid-width-small-1-2 uk-grid-width-medium-1-3 uk-grid-width-large-1-4 uk-grid-width-xlarge-1-5 uk-grid-width-xxlarge-1-3"},t._l(t.usedByProduct,function(e){return a("div",{key:e.ShortName,staticClass:"mb-20 staff-employment"},[a("div",{staticClass:"panel-box panel-dynamic",class:e.theme},[a("div",[a("permission-link",{attrs:{signature:"cfc.products.detail",params:{url:e.ProductUrl}}},[t._v(t._s(e.ShortName))]),t._v(" "),a("div",{staticClass:"svg-colored svg-w-56",domProps:{innerHTML:t._s(e.ProductIcon)}}),t._v(" "),a("div",{staticClass:"text-gray_dark text-small"},[t._v(t._s(t._f("monthFrom")(e.DateFrom)))])],1),t._v(" "),a("div",{staticClass:"dit-number dit-number-colored"},[t._v(t._s(e.Part)+" %")])])])}))])],1):t._e(),t._v(" "),"history"===t.UsageView?a("div",{staticClass:"widget__body pb-0"},[a("non-data-stub",{attrs:{stub:"text","stub-class":"mb-20","stub-data":t.historyUsage}},[a("historyChart",{attrs:{"history-usage":t.historyUsage}})],1)],1):t._e()],2)},staticRenderFns:[]},y=a("VU/8")(g,b,!1,null,null,null);e.default=y.exports},Fkvj:function(t,e,a){var r=a("bJWQ"),n=a("PqYH"),s=a("i4ON"),i=a("jD7S"),o=a("py9u"),l=a("mKB/"),c=a("hrPF"),d=a("Nkkh"),u=a("1QDk"),f=a("MoMe"),m=a("xond"),p=a("gHOb"),h=a("UfSK"),v=a("5/Qr"),g=a("WQFf"),b=a("NGEn"),y=a("ggOT"),_=a("dwsC"),C=a("yCNF"),x=a("SGXn"),w=a("ktak"),k=1,D=2,S=4,P="[object Arguments]",I="[object Function]",T="[object GeneratorFunction]",O="[object Object]",L={};L[P]=L["[object Array]"]=L["[object ArrayBuffer]"]=L["[object DataView]"]=L["[object Boolean]"]=L["[object Date]"]=L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Map]"]=L["[object Number]"]=L[O]=L["[object RegExp]"]=L["[object Set]"]=L["[object String]"]=L["[object Symbol]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L["[object Error]"]=L[I]=L["[object WeakMap]"]=!1,t.exports=function t(e,a,F,M,H,E){var N,j=a&k,U=a&D,$=a&S;if(F&&(N=H?F(e,M,H,E):F(e)),void 0!==N)return N;if(!C(e))return e;var V=b(e);if(V){if(N=h(e),!j)return c(e,N)}else{var A=p(e),B=A==I||A==T;if(y(e))return l(e,j);if(A==O||A==P||B&&!H){if(N=U||B?{}:g(e),!j)return U?u(e,o(N,e)):d(e,i(N,e))}else{if(!L[A])return H?e:{};N=v(e,A,j)}}E||(E=new r);var R=E.get(e);if(R)return R;if(E.set(e,N),x(e))return e.forEach(function(r){N.add(t(r,a,F,r,e,E))}),N;if(_(e))return e.forEach(function(r,n){N.set(n,t(r,a,F,n,e,E))}),N;var Q=$?U?m:f:U?keysIn:w,Y=V?void 0:Q(e);return n(Y||e,function(r,n){Y&&(r=e[n=r]),s(N,n,t(r,a,F,n,e,E))}),N}},G0Wc:function(t,e,a){var r=a("yCNF"),n=a("HT7L"),s=a("8gK5"),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return s(t);var e=n(t),a=[];for(var o in t)("constructor"!=o||!e&&i.call(t,o))&&a.push(o);return a}},HNDc:function(t,e){},"Ilb/":function(t,e,a){var r=a("Kzd6");t.exports=function(t,e){var a=e?r(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}},Ivie:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("MHaV"),n=a("w+eW"),s=a.n(n),i=a("0xDb"),o=a("iClD"),l={mixins:[r.a],data:function(){return{desc:{}}},computed:{absenseDate:function(){return"с "+s()(this.desc.AbsentFrom).format("DD.MM.YYYY")+" по "+s()(this.desc.AbsentTo).format("DD.MM.YYYY")}},created:function(){var t=this;this.$api.getEmplyeeDescription({Url:this.url}).then(function(e){t.desc=e,t.loadComplete=!0})},methods:{parseIcon:i.j,checkNbsp:o.a,checkValidDate:o.b,date:o.c,checkDescriptionPhoto:function(t){return!t}}},c={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("widget",{attrs:{"is-load":t.loadComplete,"grid-class":"uk-width-xxlarge-1-2"}},[r("template",{slot:"title"},[t._v(t._s(t.$tree.Title))]),t._v(" "),r("div",{staticClass:"widget__body pb-0"},[r("div",{staticClass:"uk-grid",class:{"uk-grid-match":t.checkDescriptionPhoto(t.desc.Photo)}},[r("div",{staticClass:"uk-width-medium-1-3 uk-width-large-1-4 uk-width-xlarge-1-5 uk-width-xxlarge-1-3 mb-20"},[t.checkDescriptionPhoto(t.desc.Photo)?[r("div",{staticClass:"person-avatar person-avatar_large non-photo",domProps:{innerHTML:t._s(a("lPgw"))}})]:[r("div",{staticClass:"person-avatar person-avatar_large"},[r("img",{attrs:{src:"data:image/jpeg;base64,"+t.desc.Photo,alt:"Фото сотрудника"}})])]],2),t._v(" "),r("div",{staticClass:"uk-width-medium-2-3 uk-width-large-3-4 uk-width-xlarge-1-2 uk-width-xxlarge-2-3 mb-20"},[r("dl",{staticClass:"dl-large"},[r("dt",[r("h3",[t._v(t._s(t.desc.FIO))])]),t._v(" "),t.desc.IsAbsent?r("dd",[r("div",{class:"panel-box panel-xsmall panel-bordered-"+t.theme+" d-iblock"},[r("div",[t._v(t._s(t.desc.AbsenseType)+" "),r("strong",[t._v(t._s(t.absenseDate))])]),t._v(" "),t.desc.Alternate.FIO.length?r("div",[t._v("\n                Замещает\n                "),r("smart-link",{attrs:{"smart-link":t.desc.Alternate.SmartLink},domProps:{innerHTML:t._s(t.checkNbsp(t.desc.Alternate.FIO))}})],1):t._e()])]):t._e(),t._v(" "),r("dt",[t._v("Должность")]),t._v(" "),r("dd",{domProps:{innerHTML:t._s(t.checkNbsp(t.desc.Position))}}),t._v(" "),r("dt",[t._v("Подразделение")]),t._v(" "),r("dd",{domProps:{innerHTML:t._s(t.checkNbsp(t.desc.DepartmentName))}}),t._v(" "),r("dt",[t._v("Организация")]),t._v(" "),t.desc.CompanyName&&t.desc.CompanyName.length?r("dd",[r("smart-link",{attrs:{"smart-link":t.desc.SmartLink,"custom-class":"svg-icon"}},[t.desc.CompanyIcon?r("span",{domProps:{innerHTML:t._s(t.parseIcon(t.desc.CompanyIcon))}}):r("span",{staticClass:"svg-w-16 svg-colored",domProps:{innerHTML:t._s(a("lHUk"))}}),t._v(" "),r("span",[t._v(t._s(t.desc.CompanyName))])])],1):r("dd",[t._v(" ")])]),t._v(" "),r("div",{staticClass:"uk-grid uk-grid-collapse"},[r("div",{staticClass:"uk-width-1-2"},[r("dl",{staticClass:"dl-large"},[r("dt",[t._v("Дата приёма")]),t._v(" "),r("dd",{domProps:{innerHTML:t._s(t.date(t.desc.HireDate))}})])]),t._v(" "),r("div",{staticClass:"uk-width-1-2"},[r("dl",{staticClass:"dl-large"},[t.checkValidDate(t.desc.FireDate)?[r("dt",[t._v("Дата увольнения")]),t._v(" "),r("dd",{domProps:{innerHTML:t._s(t.date(t.desc.FireDate))}})]:[r("dt",[t._v(" ")]),t._v(" "),r("dd",[t._v(" ")])]],2)])])])])])],2)},staticRenderFns:[]},d=a("VU/8")(l,c,!1,null,null,null);e.default=d.exports},Kzd6:function(t,e,a){var r=a("qwTf");t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},LlZa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("MHaV"),n=a("2zd0"),s=a("0xDb"),i=a("iClD"),o=a("lHK6"),l=a.n(o),c={mixins:[r.a],components:{Avatar:n.a},data:function(){return{boss:{Product:{},SmartLink:{},Cluster:{},Photo:"",Role:"",FIO:""},isBossEmpty:""}},created:function(){var t=this;this.$api.getEmployeeFuncBoss({Url:this.url}).then(function(e){l()(e)||(t.boss=e,t.isBossEmpty="not"),t.loadComplete=!0}).catch(function(e){console.log(e),t.loadComplete=!0})},methods:{parseIcon:s.j,checkNbsp:i.a}},d={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("widget",{attrs:{"is-load":t.loadComplete,"grid-class":"uk-width-xlarge-1-2"}},[r("template",{slot:"title"},[t._v(t._s(t.$tree.Title))]),t._v(" "),r("div",{staticClass:"widget__body pb-0"},[r("non-data-stub",{attrs:{stub:"text","stub-class":"mb-20 pos-abs-center","stub-data":t.isBossEmpty}},[r("div",{staticClass:"uk-grid"},[r("div",{staticClass:"uk-width",staticStyle:{width:"170px"}},[r("smart-link",{attrs:{"smart-link":t.boss.SmartLink}},[r("avatar",{attrs:{avatar:t.boss.Photo,"custom-class":"staff-img_medium"}})],1)],1),t._v(" "),r("div",{staticClass:"uk-width-medium-2-3 mb-20"},[r("dl",{staticClass:"dl-large"},[r("dt",[r("h3",[t.boss.FIO?r("smart-link",{attrs:{"smart-link":t.boss.SmartLink},domProps:{innerHTML:t._s(t.checkNbsp(t.boss.FIO))}}):r("span",[t._v("-")])],1)]),t._v(" "),t.boss.Role?r("dt",[t._v("Роль")]):t._e(),t._v(" "),r("dd",{domProps:{innerHTML:t._s(t.checkNbsp(t.boss.Role))}}),t._v(" "),t.boss.Product.ShortName?r("dt",[t._v("Продукт / сервис")]):t._e(),t._v(" "),t.boss.Product.ShortName?r("dd",{class:t.boss.Product.ColorTheme},[r("smart-link",{attrs:{"smart-link":t.boss.Product.SmartLink,"custom-class":"svg-icon"}},[t.boss.Product.Icon?r("span",{staticClass:"svg-w-16 svg-colored",domProps:{innerHTML:t._s(t.parseIcon(t.boss.Product.Icon))}}):r("span",{staticClass:"svg-w-16 svg-colored",domProps:{innerHTML:t._s(a("lHUk"))}}),t._v(" "),r("span",{domProps:{innerHTML:t._s(t.checkNbsp(t.boss.Product.ShortName))}})])],1):t._e(),t._v(" "),t.boss.Cluster.Name?r("dt",[t._v("Кластер")]):t._e(),t._v(" "),r("dd",{class:"text-"+t.boss.Cluster.ColorTheme,domProps:{innerHTML:t._s(t.checkNbsp(t.boss.Cluster.Name))}})])])])])],1)],2)},staticRenderFns:[]},u=a("VU/8")(c,d,!1,null,null,null);e.default=u.exports},M1c9:function(t,e){t.exports=function(t,e,a){var r=-1,n=t.length;e<0&&(e=-e>n?0:n+e),(a=a>n?n:a)<0&&(a+=n),n=e>a?0:a-e>>>0,e>>>=0;for(var s=Array(n);++r<n;)s[r]=t[r+e];return s}},MBl4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Dd8w"),n=a.n(r),s=a("MHaV"),i=a("0xDb"),o=a("w+eW"),l=a.n(o),c={mixins:[s.a],data:function(){return{Clusters:[],Total:{},activeItems:[],Relevance:""}},computed:{relevanceFormatted:function(){if(this.Relevance.length){var t=l()(this.Relevance);if(t.isValid())return"Данные на "+t.format("LL").slice(0,-3)}}},created:function(){var t=this;this.fetchData().then(function(e){var a=function(t,e){return e.reduce(function(e,a){return e+a[t]||0},0)};t.Clusters=e.Clusters.map(function(t){return n()({},t,{Data:(e=t,e.Data.map(function(t){return n()({},t,{TotalAll:t.Total,Product:(e=t.Product,e.SmartLink.Url=e.SmartLink.URL||e.SmartLink.Url||"",e.SmartLink.Url&&(e.SmartLink.Url=/\//.test(e.SmartLink.Url)?e.SmartLink.Url:"/products/detail/"+e.SmartLink.Url),e)});var e})),Active:!1});var e}).map(function(t){return n()({},t,{TotalAll:a("Total",t.Data),TotalQ1:a("Q1",t.Data),TotalQ2:a("Q2",t.Data),TotalQ3:a("Q3",t.Data),TotalQ4:a("Q4",t.Data),TotalStart:a("StartYear",t.Data),TotalVsego:a("All",t.Data),Increase:a("Increase",t.Data),Output:a("Output",t.Data),Recruited:a("Recruited",t.Data),Offers:a("Offers",t.Data)})}),t.Total={Start:a("TotalStart",t.Clusters),Q1:a("TotalQ1",t.Clusters),Q2:a("TotalQ2",t.Clusters),Q3:a("TotalQ3",t.Clusters),Q4:a("TotalQ4",t.Clusters),All:a("TotalAll",t.Clusters),Vsego:a("TotalVsego",t.Clusters),Increase:a("Increase",t.Clusters),Output:a("Output",t.Clusters),Recruited:a("Recruited",t.Clusters),Offers:a("Offers",t.Clusters)},t.Relevance=e.Relevance,t.loadComplete=!0}).catch(function(t){console.log(t)})},methods:{formatCell:function(t){return t<0?"−"+String(parseFloat(Math.abs(t))).replace(/[.]/g,","):0===t?"−":String(parseFloat(t)).replace(/[.]/g,",")},classCell:function(t){return t<0?"text-theme-crimson":""},parseIcon:i.j,fetchData:function(t){return this.$api.getStaffChange2(t).then(function(t){return t})},toggleCluster:function(t){this.Clusters[t].Active=!this.Clusters[t].Active}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("widget",{attrs:{"is-load":t.loadComplete}},[a("template",{slot:"title"},[t._v(t._s(t.$tree.Title))]),t._v(" "),a("template",{slot:"right-panel"},[t._v(t._s(this.relevanceFormatted))]),t._v(" "),a("div",{staticClass:"widget__body"},[a("div",{staticClass:"overflow-block"},[a("table",{staticClass:"table table-bordered-striped table-accordion table-medium text-right"},[a("thead",[a("tr",[a("th",{staticClass:"text-left",attrs:{rowspan:"2"}},[t._v("Кластер / Продукт")]),t._v(" "),a("th",{attrs:{rowspan:"2"}},[t._v("Факт")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v("Вакансии")]),t._v(" "),a("th",{attrs:{rowspan:"2"}},[t._v("Вывод")]),t._v(" "),a("th",{attrs:{rowspan:"2"}},[t._v("Итого")]),t._v(" "),a("th",{attrs:{rowspan:"2"}},[t._v("Чистый прирост (подобрано-уволено)")]),t._v(" "),a("th",{attrs:{rowspan:"2"}},[t._v("Подобрано с начала года всего")]),t._v(" "),a("th",{attrs:{rowspan:"2"}},[t._v("Принято офферов (планируется к выходу)")])]),t._v(" "),a("tr",[a("th",[t._v("II")]),t._v(" "),a("th",[t._v("III")]),t._v(" "),a("th",[t._v("IV")]),t._v(" "),a("th",[t._v("Всего")])])]),t._v(" "),a("tbody",[t._l(t.Clusters,function(e,r){return[a("tr",{key:"tb-header"+e.Name,class:[{"is-active":e.Active},"tr__parent","tr-"+e.ColorTheme],on:{click:function(e){t.toggleCluster(r)}}},[a("td",{staticClass:"text-left"},[a("span",{staticClass:"flex-nowrap flex-y-center"},[a("i",{staticClass:"el-icon-arrow-down arrow-icon mr-10"}),t._v(" "),a("span",{class:"text-bold text-"+e.ColorTheme},[t._v(t._s(e.Name))])])]),t._v(" "),a("td",{class:t.classCell(e.TotalStart)},[t._v(t._s(t.formatCell(e.TotalStart)))]),t._v(" "),a("td",{class:t.classCell(e.TotalQ2)},[t._v(t._s(t.formatCell(e.TotalQ2)))]),t._v(" "),a("td",{class:t.classCell(e.TotalQ3)},[t._v(t._s(t.formatCell(e.TotalQ3)))]),t._v(" "),a("td",{class:t.classCell(e.TotalQ4)},[t._v(t._s(t.formatCell(e.TotalQ4)))]),t._v(" "),a("td",{class:t.classCell(e.TotalVsego)},[t._v(t._s(t.formatCell(e.TotalVsego)))]),t._v(" "),a("td",{class:t.classCell(e.Output)},[t._v(t._s(t.formatCell(e.Output)))]),t._v(" "),a("td",{staticClass:"text-bold",class:t.classCell(e.TotalAll)},[t._v(t._s(t.formatCell(e.TotalAll)))]),t._v(" "),a("td",{staticClass:"text-bold",class:t.classCell(e.Increase)},[t._v(t._s(t.formatCell(e.Increase)))]),t._v(" "),a("td",{staticClass:"text-bold",class:t.classCell(e.Recruited)},[t._v(t._s(t.formatCell(e.Recruited)))]),t._v(" "),a("td",{staticClass:"text-bold",class:t.classCell(e.Offers)},[t._v(t._s(t.formatCell(e.Offers)))])]),t._v(" "),t._l(e.Data,function(r,n){return a("tr",{directives:[{name:"show",rawName:"v-show",value:e.Active,expression:"cluster.Active"}],key:e.Name+n,staticClass:"tr__child"},[a("td",{staticClass:"text-left"},[a("smart-link",{class:"link-"+e.ColorTheme,attrs:{"smart-link":r.Product.SmartLink,"custom-class":"svg-icon"}},[a("span",{class:["svg-"+e.ColorTheme],domProps:{innerHTML:t._s(t.parseIcon(r.Product.Icon))}}),t._v(" "),a("span",[t._v(t._s(r.Product.ShortName))])])],1),t._v(" "),a("td",{class:t.classCell(r.StartYear)},[t._v(t._s(t.formatCell(r.StartYear)))]),t._v(" "),a("td",{class:t.classCell(r.Q2)},[t._v(t._s(t.formatCell(r.Q2)))]),t._v(" "),a("td",{class:t.classCell(r.Q3)},[t._v(t._s(t.formatCell(r.Q3)))]),t._v(" "),a("td",{class:t.classCell(r.Q4)},[t._v(t._s(t.formatCell(r.Q4)))]),t._v(" "),a("td",{class:t.classCell(r.All)},[t._v(t._s(t.formatCell(r.All)))]),t._v(" "),a("td",{class:t.classCell(r.Output)},[t._v(t._s(t.formatCell(r.Output)))]),t._v(" "),a("td",{class:t.classCell(r.TotalAll)},[t._v(t._s(t.formatCell(r.TotalAll)))]),t._v(" "),a("td",{class:t.classCell(r.Increase)},[t._v(t._s(t.formatCell(r.Increase)))]),t._v(" "),a("td",{class:t.classCell(r.Recruited)},[t._v(t._s(t.formatCell(r.Recruited)))]),t._v(" "),a("td",{class:t.classCell(r.Offers)},[t._v(t._s(t.formatCell(r.Offers)))])])})]}),t._v(" "),a("tr",{staticClass:"text-bold"},[a("td",{staticClass:"text-left text-bold"},[t._v("Общий итог")]),t._v(" "),a("td",{class:t.classCell(t.Total.Start)},[t._v(t._s(t.formatCell(t.Total.Start)))]),t._v(" "),a("td",{class:t.classCell(t.Total.Q2)},[t._v(t._s(t.formatCell(t.Total.Q2)))]),t._v(" "),a("td",{class:t.classCell(t.Total.Q3)},[t._v(t._s(t.formatCell(t.Total.Q3)))]),t._v(" "),a("td",{class:t.classCell(t.Total.Q4)},[t._v(t._s(t.formatCell(t.Total.Q4)))]),t._v(" "),a("td",{class:t.classCell(t.Total.Vsego)},[t._v(t._s(t.formatCell(t.Total.Vsego)))]),t._v(" "),a("td",{class:t.classCell(t.Total.Output)},[t._v(t._s(t.formatCell(t.Total.Output)))]),t._v(" "),a("td",{staticClass:"text-bold",class:t.classCell(t.Total.All)},[t._v(t._s(t.formatCell(t.Total.All)))]),t._v(" "),a("td",{class:t.classCell(t.Total.Increase)},[t._v(t._s(t.formatCell(t.Total.Increase)))]),t._v(" "),a("td",{class:t.classCell(t.Total.Recruited)},[t._v(t._s(t.formatCell(t.Total.Recruited)))]),t._v(" "),a("td",{class:t.classCell(t.Total.Offers)},[t._v(t._s(t.formatCell(t.Total.Offers)))])])],2)])])])],2)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(t){a("0xFh")},"data-v-f359a066",null);e.default=u.exports},Nkkh:function(t,e,a){var r=a("tv3T"),n=a("l9Lx");t.exports=function(t,e){return r(t,n(t),e)}},"QEg/":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 438.533 438.533" style="enable-background:new 0 0 438.533 438.533;" xml:space="preserve"><path d="M409.133,109.203c-19.608-33.592-46.205-60.189-79.798-79.796C295.736,9.801,259.058,0,219.273,0 c-39.781,0-76.47,9.801-110.063,29.407c-33.595,19.604-60.192,46.201-79.8,79.796C9.801,142.8,0,179.489,0,219.267 c0,39.78,9.804,76.463,29.407,110.062c19.607,33.592,46.204,60.189,79.799,79.798c33.597,19.605,70.283,29.407,110.063,29.407 s76.47-9.802,110.065-29.407c33.593-19.602,60.189-46.206,79.795-79.798c19.603-33.596,29.403-70.284,29.403-110.062 C438.533,179.485,428.732,142.795,409.133,109.203z"></path></svg>'},QP4A:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),s=a("woOf"),i=a.n(s),o=a("exGp"),l=a.n(o),c=a("7+uW"),d=a("Za4h"),u=a.n(d),f=a("M4fF"),m=a("V1ii"),p=a("jSxR"),h=a.n(p);function v(t,e){return t+" "+(e.SmartLink&&e.SmartLink.Url?"link":"")}var g={name:"Cit",props:["mainStaff","companyId"],data:function(){return{staffTree:null,svg:null,treeLayout:u.a.layout.tree().nodeSize([0,20]).children(function(t){return t.Children}),nodes:[],staffHeight:0,margin:{top:5,right:20,bottom:50,left:1},imgHeight:50,indent:50,basicBarHeight:60,barMargin:25,barPadding:20,duration:400,paletteChar:["#a0abba"],photoStub:h.a}},computed:{width:function(){return 1200-this.margin.left-this.margin.right},barWidth:function(){return this.width-4*this.indent+20}},watch:{mainStaff:function(){this.initData()}},methods:{initData:function(){this.staffTree=this.mainStaff[0],this.staffTree.x0=0,this.staffTree.y0=0,this.svg=u.a.select("#cit"),this.nodes=this.treeLayout(this.staffTree),this.nodes.forEach(function(t){t.expanded=!1,t.staffView=!1,t.barHeight=0}),this.toggleStaffView(this.staffTree),this.toggle(this.staffTree)},updateTree:function(t){var e=this;this.nodes=this.treeLayout(this.staffTree),t.x0&&t.y0||(t.x0=t.x,t.y0=t.y);var a=this.duration;function r(t){return t.source}function n(t){return t.target}function s(t){return[t.x,t.y]}u.a.svg.diagonal=function(){var t=r,e=n,a=s;function i(r,n){var s=t.call(this,r,n),i=e.call(this,r,n),o=(s.y+i.y)/2,l=[s,{x:s.x,y:o},{x:i.x,y:o},i];return"M"+(l=l.map(a))[0]+"M"+l[1]+" "+l[2]+" "+l[3]}return i.source=function(e){return arguments.length?(t=d3_functor(e),i):t},i.target=function(t){return arguments.length?(e=d3_functor(t),i):e},i.projection=function(t){return arguments.length?(a=t,i):a},i};var i=u.a.svg.diagonal().projection(function(t){return[t.y,t.x]}),o=u.a.select("#cit>svg").selectAll("g.node").data(this.nodes,this.getId),l=o.enter().append("g").attr("class","node").attr("id",function(t){return"staffTree-"+t.DepartmentID}).attr("data-depth",function(t){return t.depth}).attr("data-expandable",function(t){return t.SubordinateEmpCount>0?1:0}).attr("transform",function(e){return"translate("+t.y0+","+t.x0+")"}).style("opacity",1e-6);l.append("rect").attr("class","linkPatch").attr("x",1).attr("width",e.indent).style("stroke-width",0).style("fill-opacity",1),l.append("rect").attr("class","block").attr("x",0).attr("rx",5).attr("ry",5).attr("width",function(t){return e.barWidth}).on("click",e.toggleStaffView),l.append("text").attr("dx","0em").attr("dy","1.5em").attr("x",e.barPadding).attr("y",e.barPadding-6).text(function(t){return t.DepartmentName}).attr("class","department").call(this.wrapText,.25*this.barWidth,1.2),l.append("rect").attr("class","departmentButton").attr("x",10).attr("height",30).attr("width",30).attr("rx",15).attr("ry",15).on("click",e.toggle),l.append("g").attr("class","departmentLoader").append("g").append("text").attr("font-family","element-icons").text(""),l.append("g").attr("class","staffLoader").append("g").append("text").attr("font-family","element-icons").text(""),l.append("text").attr("class","departmentButtonText");var c=l.append("text").attr("class","staffViewButton").attr("text-anchor","end").on("click",e.toggleStaffView);c.append("tspan").attr("class","icon").attr("font-family","element-icons"),c.append("tspan").attr("class","text");var d=e.imgHeight/2,p=function(t){return"circle("+d+"px at center)"},h=.32*(e.barWidth-2*e.barPadding),g=l.append("g").attr("class",v.bind(null,"chiefView")).attr("id",function(t){return"emp-"+t.EmpID}).attr("visibility",function(t){return t.FIO?"visibile":"hidden"});g.append("g").attr("class","productLine").attr("transform",function(t){return"translate("+(2*d+20)+",10)"}),g.select(".productLine").selectAll(".product").data(function(t){return t.Products}).enter().append("g").attr("class","product").append("image").attr("xlink:href",function(t){return t.ProductIcon?"data:image/svg+xml,"+encodeURIComponent(Object(m.b)(t.ProductIcon,m.c.clusterTheme.get(t.ColorTheme))):""}).attr("x",function(t,e){return 21*e}).attr("width",16).attr("height",16).append("title").text(function(t){return t.ProductName});var b=g.append("g").attr("class","staffPhoto");b.append("image").attr("width",function(t){return(t.Photo?1:.6)*e.imgHeight}).attr("height",function(t){return(t.Photo?1:.6)*e.imgHeight}).attr("class","photo").attr("xlink:href",function(t){return"data:"+(t.Photo?"image/jpeg;base64,"+t.Photo:"image/svg+xml,"+encodeURIComponent(Object(m.b)(e.photoStub,"#eff0f2")))}).style("clip-path",p).style("-webkit-clip-path",p).attr("transform",function(t){return t.Photo?null:"translate("+.2*e.imgHeight+","+.2*e.imgHeight+")"}),b.append("circle").attr("cx",d).attr("cy",d).attr("r",d).attr("display",function(t){return t.FIO&&!t.Photo?"block":"none"}),g.append("text").attr("x",e.imgHeight+10).attr("y",d).attr("dx","1em").attr("dy","-0.25em").text(function(t){return t.Position}).attr("fill","#a0abba").attr("class","position").attr("data-par",function(t){return 21*Object(f.filter)(t.Products,"ProductIcon").length}).call(this.wrapText,.72*h,1),g.append("text").attr("x",e.imgHeight+10).attr("y",d).attr("dx","0.75em").attr("dy",function(t){return("2"===u.a.select("#emp-"+t.EmpID+" .position").attr("data-lines")?1.75:1)+"em"}).text(function(t){return t.FIO}).attr("class","fio").call(this.wrapText,.72*h,1),g.append("rect").attr("width",h).attr("height",e.basicBarHeight).attr("rx",5).attr("ry",5).on("click",e.gotoEmployeeCard),l.append("g").attr("class","staffView");var y=o.select("g.staffView").selectAll(".staffItem").data(function(t){return t.Staff?t.Staff:[]}),_=y.enter().append("g").attr("class",v.bind(null,"staffItem")).attr("id",function(t){return"emp-"+t.EmpID}).attr("transform",function(t,a){return"translate("+(e.barPadding+a%3*(e.barWidth-2*e.barPadding)/3)+","+(Math.floor(a/3)*e.basicBarHeight+5*Math.ceil(a/3))+")"}),C=_.append("g").attr("class","staffPhoto");C.append("image").attr("width",function(t){return(t.Photo?1:.6)*e.imgHeight}).attr("height",function(t){return(t.Photo?1:.6)*e.imgHeight}).attr("class","photo").attr("xlink:href",function(t){return"data:"+(t.Photo?"image/jpeg;base64,"+t.Photo:"image/svg+xml,"+encodeURIComponent(Object(m.b)(e.photoStub,"#eff0f2")))}).style("clip-path",p).style("-webkit-clip-path",p).attr("transform",function(t){return t.Photo?null:"translate("+.2*e.imgHeight+","+.2*e.imgHeight+")"}),C.append("circle").attr("cx",d).attr("cy",d).attr("r",d).attr("display",function(t){return t.FIO&&!t.Photo?"block":"none"}),_.append("text").attr("x",e.imgHeight+10).attr("y",d).attr("dx","1em").attr("dy","-0.25em").text(function(t){return t.Position}).attr("fill","#a0abba").attr("class","position").attr("data-par",function(t){return 21*Object(f.filter)(t.Products,"ProductIcon").length}).call(this.wrapText,.72*h,1),_.append("text").attr("x",e.imgHeight+10).attr("y",d).attr("dx","0.75em").attr("dy",function(t){return("2"===u.a.select("#emp-"+t.EmpID+" .position").attr("data-lines")?1.75:1)+"em"}).attr("class","fio").text(function(t){return t.FIO}).call(this.wrapText,.72*h,1),_.append("g").attr("class","productLine").attr("transform",function(t){return"translate("+(2*d+20)+",10)"}),y.select(".productLine").selectAll(".product").data(function(t){return t.Products}).enter().append("g").attr("class","product").append("image").attr("xlink:href",function(t){return t.ProductIcon?"data:image/svg+xml,"+encodeURIComponent(Object(m.b)(t.ProductIcon,m.c.clusterTheme.get(t.ColorTheme))):""}).attr("x",function(t,e){return 21*e}).attr("width",16).attr("height",16).append("title").text(function(t){return t.ProductName}),_.append("rect").attr("width",h).attr("height",e.basicBarHeight).attr("rx",5).attr("ry",5).on("click",e.gotoEmployeeCard);var x=l.append("g").attr("class","empCountView");x.append("text").attr("class","emp-count").text(function(t){return t.EmpCount}).attr("text-anchor","middle"),x.append("text").attr("dy","1.2em").text(function(t){var e=t.EmpCount%10;return" сотрудник"+(0===e||e>=5||t.EmpCount>=11&&t.EmpCount<=14?"ов":1===e?"":"а")}).attr("fill",e.paletteChar[0]).style("font-size","13px").attr("text-anchor","middle");var w=0;this.nodes.forEach(function(t,r){t.x=e.margin.top+r*e.barMargin+w,t.expandable=t.SubordinateUnits>0;var n=u.a.select("#staffTree-"+t.DepartmentID+" > .staffView"),s=u.a.select("#staffTree-"+t.DepartmentID+" > .empCountView"),i=0;try{var o=u.a.select("#staffTree-"+t.DepartmentID+" > text.department").attr("data-lines");o>3&&(i+=15*(o-3)),u.a.select("#staffTree-"+t.DepartmentID+" > .chiefView").attr("transform","translate("+(e.barPadding+(e.barWidth-2*e.barPadding)/3)+","+(e.barPadding+i/2)+")"),s.attr("transform","translate("+(e.barWidth-e.barPadding-s.node().getBBox().width/2)+","+(e.barPadding+(e.basicBarHeight+i)/2)+")")}catch(t){}t.addSpace=i,t.barHeight=(t.Staff&&t.Staff.length&&t.staffView||t.staffLoading&&t.SubordinateEmpCount?Math.ceil(t.SubordinateEmpCount/3)+1:1)*(e.basicBarHeight+5)+i+2*e.barPadding;var l=u.a.selectAll("#staffTree-"+t.DepartmentID+" > .departmentButton"),c=u.a.selectAll("#staffTree-"+t.DepartmentID+" .departmentButtonText"),d=u.a.selectAll("#staffTree-"+t.DepartmentID+" > .staffViewButton"),f=u.a.selectAll("#staffTree-"+t.DepartmentID+" > .departmentLoader"),m=u.a.selectAll("#staffTree-"+t.DepartmentID+" > .staffLoader");l.style("visibility",t.depth&&t.expandable?"visible":"hidden").attr("y",t.barHeight-15),c.attr("visibility",t.depth&&t.expandable&&!t.departmentsLoading?"visible":"hidden").attr("x",function(t){return t.expanded?21:19}).attr("y",function(e){return t.barHeight+(e.expanded?7:8)}).text(function(t){return t.expanded?"-":"+"}),f.attr("transform","translate("+(t.depth?17:14)+","+(t.barHeight+(t.depth?7:-7))+")").attr("visibility",t.departmentsLoading?"visible":"hidden"),d.attr("transform","translate("+(e.barWidth-e.barPadding)+","+(t.barHeight-3*e.barPadding/4)+")"),d.select(".icon").text(function(t){return(t.staffView?"":"")+" "}),d.select(".text").text(function(t){return t.staffView?"Скрыть состав":"Показать состав ("+t.SubordinateEmpCount+")"}),m.attr("transform","translate("+e.barWidth/2+","+(e.basicBarHeight+(t.barHeight-e.basicBarHeight)/2)+")"),t.staffView?(d.attr("visibility","hidden").attr("display","none"),l.attr("visibility","hidden"),setTimeout(function(){m.attr("visibility","hidden"),n.attr("transform",function(a){return"translate(0, "+(e.basicBarHeight+e.barPadding+t.addSpace)+")"}).style("visibility","visible"),d.attr("visibility",null).attr("display",null),l.attr("visibility",null)},a)):(n.style("visibility","hidden"),t.staffLoading?setTimeout(function(){m.attr("visibility","visible")},a):m.attr("visibility","hidden")),w+=t.barHeight,t.y=e.indent*t.depth+e.margin.left}),w+=e.margin.top+e.margin.bottom+e.nodes.length*e.barMargin,l.attr("x",e.basicBarHeight),this.staffHeight=w;o.selectAll("rect.block, rect.linkPatch").transition().duration(a).attr("height",function(t){return t.barHeight}),this.nodes.forEach(function(t,e){t.x0=t.x,t.y0=t.y}),l.transition().duration(a).attr("transform",function(t){return"translate("+t.y+","+t.x+")"}).style("opacity",1),o.transition().duration(a).attr("transform",function(t){return"translate("+t.y+","+t.x+")"}).style("opacity",1),o.exit().transition().duration(a).attr("transform",function(e){return"translate("+t.y0+","+t.x0+")"}).style("opacity",1e-6).remove();var k=u.a.select("#cit>svg g.links").selectAll("path.link").data(e.treeLayout.links(this.nodes),function(t){return t.target.id});k.enter().insert("path","g").attr("class","link").attr("d",function(e){var a={x:t.x0,y:t.y0};return i({source:a,target:a})}).attr("stroke",e.paletteChar[0]).transition().duration(a).attr("d",i),k.transition().duration(a).attr("d",i),k.exit().transition().duration(a).attr("d",function(e){var a={x:t.x,y:t.y};return i({source:a,target:a})}).remove()},getId:function(t){return t.id=t.DepartmentID||t.EmpID,t.id},toggleStaffView:function(t){var e=this;return l()(n.a.mark(function a(){var r,s,i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.SubordinateEmpCount&&!t.staffLoading&&!t.staffToggle){a.next=2;break}return a.abrupt("return");case 2:if(t.staffToggle=!0,r=e,s=u.a.selectAll("#staffTree-"+t.DepartmentID+" > .staffLoader > g"),t.staffView||t.Staff||(t.staffLoading=!0,s.attr("class","loader-icon"),r.updateTree(r.staffTree)),t.staffView=!t.staffView,t.Staff){a.next=13;break}return a.next=10,r.$api.getCompanyTreeStaff({CompanyID:r.companyId,DepartmentID:t.DepartmentID});case 10:i=a.sent,t.Staff=i.Data,s.attr("class",null);case 13:r.updateTree(r.staffTree),setTimeout(function(){t.staffLoading=!1,t.staffToggle=!1},r.duration);case 15:case"end":return a.stop()}},a,e)}))()},toggle:function(t){var e=this,a=u.a.selectAll("#staffTree-"+t.DepartmentID+" > .departmentLoader > g");t.expanded||void 0!==t.Children||(t.departmentsLoading=!0,a.attr("class","loader-icon"),this.updateTree(this.staffTree)),t.expanded=!t.expanded,void 0!==t.Children?(t.Children?(t._Children=t.Children,t.Children=null):(t.Children=t._Children,t._Children=null),this.updateTree(t)):this.$api.getCompanyDepartments({CompanyID:this.companyId,DepartmentID:t.DepartmentID}).then(function(r){t.departmentsLoading=!1,a.attr("class",null),t.Children=r.Data,e.updateTree(t)})},hideAll:function(){this.hide(this.staffTree)},hide:function(t){var e=this;t.Children&&(t.Children.forEach(function(t){e.hide(t)}),t.depth&&t.expanded&&e.toggle(t)),e.updateTree(e.staffTree)},wrapText:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.2;t.each(function(){for(var t=u.a.select(this),r=t.text().split(/([\s/-])+/).reverse(),n=void 0,s=[],i=0,o=parseInt(t.attr("data-par"))||0,l=parseInt(t.attr("x")),c=t.attr("y"),d=parseFloat(t.attr("dx")),f=parseFloat(t.attr("dy")),m=t.text(null).append("tspan").attr("x",l+o).attr("y",c).attr("dx",d+"em");n=r.pop();)s.push(n),m.text(s.join(" ")),m.node().getComputedTextLength()>e&&(s.pop(),m.text(s.join(" ")),s=[n],m=t.append("tspan").attr("x",l).attr("y",c).text(n),i++);t.attr("data-lines",i+1).selectAll("tspan").attr("dx",d+"em").attr("dy",function(t,e){return e*(a+1)/2+f+"em"})})},gotoEmployeeCard:function(t){var e=t.SmartLink.Url;e.length&&this.$router.push(e)}},mounted:function(){this.initData()},activated:function(){this.nodes.length&&this.updateTree(this.nodes[0])}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"cit"}},[e("svg",{attrs:{width:this.width+this.margin.right,height:this.staffHeight,viewBox:"0 0 "+(this.width+this.margin.right)+" "+this.staffHeight,preserveAspectRatio:"none"}},[e("g",{staticClass:"links",attrs:{transform:"translate(0,"+this.basicBarHeight/2+")"}})])])},staticRenderFns:[]};var y=a("VU/8")(g,b,!1,function(t){a("7ZQy")},null,null).exports,_=c.default.extend({props:["$tree"],data:function(){return{Filters:{Companies:[]},Parameters:{CompanyID:"",UseDefault:1},Data:[],loadComplete:!1}},created:function(){var t=this;return l()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getCompanyTreeFilters();case 2:a=e.sent,i()(t.Filters,a),t.requestCompanyTree();case 5:case"end":return e.stop()}},e,t)}))()},methods:{requestCompanyTree:function(){var t=this;return l()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getCompanyDepartments(t.Parameters);case 2:a=e.sent,t.Data=a.Data,t.Parameters=a.Parameters,t.loadComplete=!0;case 6:case"end":return e.stop()}},e,t)}))()}},components:{cit:y}}),C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("widget",{attrs:{"is-load":t.loadComplete}},[a("template",{slot:"title"},[t._v(t._s(t.$tree.Title))]),t._v(" "),a("div",{staticClass:"widget__body"},[a("div",{staticClass:"cit-panel"},[a("form",{staticClass:"uk-form-stacked mb-20 cit-filter"},[a("div",{staticClass:"uk-form-row"},[a("div",{staticClass:"uk-form-label"},[t._v("Организация")]),t._v(" "),a("div",{staticClass:"uk-form-controls"},[a("el-select",{attrs:{placeholder:""},on:{change:t.requestCompanyTree},model:{value:t.Parameters.CompanyID,callback:function(e){t.$set(t.Parameters,"CompanyID",e)},expression:"Parameters.CompanyID"}},t._l(t.Filters.Companies,function(e){return a("el-option",{key:e.CompanyID,attrs:{label:e.Name,value:e.CompanyID}},[a("span",{staticClass:"svg-icon",domProps:{innerHTML:t._s(e.Icon)}}),t._v(" "),a("span",[t._v(t._s(e.Name))])])}))],1)])]),t._v(" "),a("cit",{attrs:{"main-staff":t.Data,"company-id":t.Parameters.CompanyID}})],1)])],2)},staticRenderFns:[]};var x=a("VU/8")(_,C,!1,function(t){a("HNDc")},"data-v-57c7717c",null);e.default=x.exports},QsdH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("MHaV"),n=a("2zd0"),s=a("0xDb"),i=a("iClD"),o=a("lHK6"),l=a.n(o),c={mixins:[r.a],components:{Avatar:n.a},data:function(){return{boss:{Company:{},Department:{},SmartLink:{},Photo:"",FIO:"",Position:""},isBossEmpty:""}},created:function(){var t=this;this.$api.getEmployeeOrgBoss({Url:this.url}).then(function(e){l()(e)||(t.boss=e,t.isBossEmpty="not"),t.loadComplete=!0}).catch(function(e){console.log(e),t.loadComplete=!0})},methods:{parseIcon:s.j,checkNbsp:i.a}},d={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("widget",{attrs:{"is-load":t.loadComplete,"grid-class":"uk-width-xlarge-1-2"}},[r("template",{slot:"title"},[t._v(t._s(t.$tree.Title))]),t._v(" "),r("div",{staticClass:"widget__body pb-0"},[r("non-data-stub",{attrs:{stub:"text","stub-class":"mb-20 pos-abs-center","stub-data":t.isBossEmpty}},[r("div",{staticClass:"uk-grid"},[r("div",{staticClass:"uk-width",staticStyle:{width:"170px"}},[r("smart-link",{attrs:{"smart-link":t.boss.SmartLink}},[r("avatar",{attrs:{avatar:t.boss.Photo,"custom-class":"staff-img_medium"}})],1)],1),t._v(" "),r("div",{staticClass:"uk-width-medium-2-3 mb-20"},[r("dl",{staticClass:"dl-large"},[r("dt",[r("h3",[t.boss.FIO?r("smart-link",{attrs:{"smart-link":t.boss.SmartLink},domProps:{innerHTML:t._s(t.checkNbsp(t.boss.FIO))}}):r("span",[t._v("-")])],1)]),t._v(" "),t.boss.Position?r("dt",[t._v("Должность")]):t._e(),t._v(" "),r("dd",{domProps:{innerHTML:t._s(t.checkNbsp(t.boss.Position))}}),t._v(" "),t.boss.Department.Name?r("dt",[t._v("Подразделение")]):t._e(),t._v(" "),r("dd",{domProps:{innerHTML:t._s(t.checkNbsp(t.boss.Department.Name))}}),t._v(" "),t.boss.Company.ShortName?r("dt",[t._v("Организация")]):t._e(),t._v(" "),t.boss.Company.ShortName?r("dd",[r("smart-link",{attrs:{"smart-link":t.boss.Company.SmartLink,"custom-class":"svg-icon"}},[t.boss.Company.Logo?r("span",{staticClass:"svg-w-16 svg-colored",domProps:{innerHTML:t._s(t.parseIcon(t.boss.Company.Logo))}}):r("span",{staticClass:"svg-w-16 svg-colored",domProps:{innerHTML:t._s(a("lHUk"))}}),t._v(" "),r("span",{domProps:{innerHTML:t._s(t.checkNbsp(t.boss.Company.ShortName))}})])],1):t._e()])])])])],1)],2)},staticRenderFns:[]},u=a("VU/8")(c,d,!1,null,null,null);e.default=u.exports},SGXn:function(t,e,a){var r=a("eP4g"),n=a("S7p9"),s=a("Dc0G"),i=s&&s.isSet,o=i?n(i):r;t.exports=o},TLkZ:function(t,e){},UfSK:function(t,e){var a=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&a.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},VORN:function(t,e,a){var r=a("yCNF"),n=Object.create,s=function(){function t(){}return function(e){if(!r(e))return{};if(n)return n(e);t.prototype=e;var a=new t;return t.prototype=void 0,a}}();t.exports=s},Vi3P:function(t,e,a){var r=a("bIjD"),n=a("oqL2"),s=a("Cf65"),i=a("Ubhr");t.exports=function(t,e){return e=r(e,t),null==(t=s(t,e))||delete t[i(n(e))]}},WQFf:function(t,e,a){var r=a("VORN"),n=a("vi0E"),s=a("HT7L");t.exports=function(t){return"function"!=typeof t.constructor||s(t)?{}:r(n(t))}},WyC4:function(t,e){var a=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,a.exec(t));return e.lastIndex=t.lastIndex,e}},ZD0O:function(t,e,a){var r=a("CHen"),n=a("RfZv");t.exports=function(t,e){return r(t,e,function(e,a){return n(t,a)})}},ZD4I:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),s=a("woOf"),i=a.n(s),o=a("exGp"),l=a.n(o),c=a("w+eW"),d=a.n(c),u=a("Dd8w"),f=a.n(u),m=a("d7EF"),p=a.n(m),h=a("Za4h"),v=a.n(h),g=a("0xDb"),b=a("M4fF"),y=a("kW7t"),_=a("qwbZ"),C=a("twHu");d3.sankey=function(){var t={},e=24,a=8,r=[1,1],n=[],s=[];function i(t){for(var e,a=t.length-1;a>=0;a--)if(e=o(t[a],[]))return e}function o(t,e){for(var a,r,n=t.sourceLinks.length-1;n>=0;n--)if(!(r=t.sourceLinks[n]).cycleBreaker){if(a=r.target,e.indexOf(a)>-1)return r.cycleBreaker=!0,r;if(e.push(t),r=o(a,e),e.pop(),r)return r}}function l(){function t(t,e){return t.source.y-e.source.y}function e(t,e){return t.target.y-e.target.y}n.forEach(function(a){a.sourceLinks.sort(e),a.targetLinks.sort(t)}),n.forEach(function(t){var e=0,a=0;t.sourceLinks.forEach(function(t){t.sy=e,e+=t.dy}),t.targetLinks.forEach(function(t){t.ty=a,a+=t.dy})})}function c(t){return t.y+t.dy/2}function d(t){return t.value}return t.nodeWidth=function(a){return arguments.length?(e=+a,t):e},t.nodePadding=function(e){return arguments.length?(a=+e,t):a},t.nodes=function(e){return arguments.length?(n=e,t):n},t.links=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(r=e,t):r},t.layout=function(o){return n.forEach(function(t){t.sourceLinks=[],t.targetLinks=[]}),s.forEach(function(t){var e=t.source,a=t.target;"number"==typeof e&&(e=t.source=n[t.source]),"number"==typeof a&&(a=t.target=n[t.target]),e.sourceLinks.push(t),a.targetLinks.push(t)}),n.forEach(function(t){t.value=Math.max(Object(y.g)(t.sourceLinks,d),Object(y.g)(t.targetLinks,d))}),function(){var t,a=n,s=0;for(;a.length;)t=[],a.forEach(function(a){a.x=s,a.dx=e,a.sourceLinks.forEach(function(e){t.indexOf(e.target)<0&&!e.cycleBreaker&&t.push(e.target)})}),t.length===a.length?(console.warn("Detected cycles in the graph."),i(t)):(a=t,++s);(function(t){n.forEach(function(e){e.sourceLinks.length||(e.x=t-1)})})(s),o=(r[0]-e)/(s-1),n.forEach(function(t){t.x*=o});var o}(),function(t){var e=Object(_.b)().key(function(t){return t.x}).sortKeys(y.a).entries(n).map(function(t){return t.values});i=Object(y.d)(e,function(t){return(r[1]-(t.length-1)*a)/Object(y.g)(t,d)}),e.forEach(function(t){t.forEach(function(t,e){t.y=e,t.dy=t.value*i})}),s.forEach(function(t){t.dy=t.value*i}),f();var i;for(var o=1;t>0;--t)u(o*=.99),f(),l(o),f();function l(t){function a(t){return c(t.source)*t.value}e.forEach(function(e){e.forEach(function(e){if(e.targetLinks.length){var r=Object(y.g)(e.targetLinks,a)/Object(y.g)(e.targetLinks,d);e.y+=(r-c(e))*t}})})}function u(t){function a(t){return c(t.target)*t.value}e.slice().reverse().forEach(function(e){e.forEach(function(e){if(e.sourceLinks.length){var r=Object(y.g)(e.sourceLinks,a)/Object(y.g)(e.sourceLinks,d);e.y+=(r-c(e))*t}})})}function f(){e.forEach(function(t){var e,n,s,i=0,o=t.length;for(s=0;s<o;++s)e=t[s],(n=i-e.y)>0&&(e.y+=n),i=e.y+e.dy+a;if((n=i-a-r[1])>0)for(i=e.y-=n,s=o-2;s>=0;--s)e=t[s],(n=e.y+e.dy+a-i)>0&&(e.y-=n),i=e.y})}}(o),l(),t},t.relayout=function(){return l(),t},t.link=function(){var t=.5;function e(e){var a=e.source.x+e.source.dx,r=e.target.x,n=Object(C.c)(a,r),s=n(t),i=n(1-t),o=e.source.y+e.sy+e.dy/2,l=e.target.y+e.ty+e.dy/2;return"M"+a+","+o+"C"+s+","+o+" "+i+","+l+" "+r+","+l}return e.curvature=function(a){return arguments.length?(t=+a,e):t},e},t};var x=a("7t+N"),w=a.n(x),k={name:"SankeyChar",props:["staff","parameters"],data:function(){return{x:0,y:0,margin:{top:10,right:10,bottom:10,left:10},width:800,height:680,customColors:{},graph:{nodes:[],links:[]},company:[]}},mounted:function(){this.makeGraph();var t=this;this.updateChart(this.staff),w()(window).resize(function(){t.updateChart(t.staff)})},computed:{chartData:function(){return this.staff.map(function(t){return{source:t.Source,target:t.Target,value:t.Value,clr:t.ColorTheme,type:t.TargetType,icon:t.TargetIcon,url:t.TargetUrl,targetId:t.TargetID,sourceId:t.SourceID}})}},methods:{goToProduct:function(t){this.$goTo("cfc.products.detail",{url:t})},filterDateIsCurrentDate:function(){var t=d()(this.parameters.Date,"MM.DD.YYYY").format("MM.YYYY");return d()().format("MM.YYYY")===t},makeGraph:function(){var t={nodes:[],links:[]},e=[],a=this;this.chartData.forEach(function(r){a.customColors[r.source]=r.clr,t.nodes.push({name:r.source,id:r.sourceId}),t.nodes.push({name:r.target,id:r.targetId}),t.links.push({source:r.sourceId,sourceName:r.source,target:r.targetId,targetName:r.target,clr:r.clr,value:+r.value}),"company"===r.type&&e.push({name:r.target,id:r.targetId})}),t.nodes=v.a.keys(v.a.nest().key(function(t){return t.name+"$$$"+t.id}).map(t.nodes)),(e=v.a.keys(v.a.nest().key(function(t){return t.name+"$$$"+t.id}).map(e))).sort(function(t,e){var a=t.split("$$$")[0],r=e.split("$$$")[0];return"ДИТ"===a?-1:"ДИТ"===r?1:"ИНФОГОРОД, ГБУ"===a?-1:"ИНФОГОРОД, ГБУ"===r?1:"Внешние организации"===a?1:"Внешние организации"===r?-1:a>r?1:a<r?-1:void 0});var r=0;t.nodes.forEach(function(a,n){var s=a.split("$$$")[1];if(e.findIndex(function(t){return t.split("$$$")[1]===s})>-1){var i=e[r].split("$$$"),o=p()(i,2),l=o[0],c=o[1];t.nodes[n]=l+"$$$"+c,r+=1}}),t.links.forEach(function(e){var a=function(t){return t.split("$$$")[1]};e.source=t.nodes.findIndex(function(t){return a(t)===e.source}),e.target=t.nodes.findIndex(function(t){return a(t)===e.target})}),e=e.map(function(t){return{name:t.split("$$$")[0],id:t.split("$$$")[1]}});var n=a.chartData.map(function(t){return t}).reverse(),s=e.map(function(t){return t.name});t.nodes=t.nodes.map(function(t){var e=t.split("$$$"),a=p()(e,2),r=a[0],i=a[1],o=n.findIndex(function(t){return t.sourceId===i||t.targetId===i}),l=n.findIndex(function(t){return t.targetId===i}),c=n[o],d=n[l],u=n.find(function(t){return t.targetId===i}),f=s.includes(r)?"company":"product",m=d?d.type:f,h=d?d.url:"";return{icon:u?u.icon:"",type:m,sourceId:c.sourceId,targetId:c.sourceId,url:h,key:c.sourceId+c.targetId+r,name:r}}),this.graph=t,this.company=e},format:function(t){var e=v.a.format(",.0f"),a=[2,0,1,1,1,2,2,2,2,2],r=["Сотрудник","Сотрудника","Сотрудников"];return t<11||t>14?e(t)+" "+r[a[t%10]]:t>10||t>15?e(t)+" "+r[a[0]]:void 0},colorTarget:function(t){return g.g.clusterTheme.get(this.customColors[t.name])||"#DDD"},dispatchToHrList:function(t){var e=this;this.$goTo("cfc.hr.list",null,null,function(a){e.$messageSend("cfc.hr.list.list","setWidgetParameters",t),a()})},colorStroke:function(t){return g.g.clusterTheme.get(t.clr)},updateChart:function(t){var e=this;if(v.a.select("#sankey svg").empty()){var a=v.a.select("#sankey").append("svg").classed("sankey",!0).style("fill","rgba(0,0,0,0)").attr("preserveAspectRatio","xMinYMin meet").classed("svg-content",!0).append("g");a.append("g"),a.append("g")}v.a.select("#sankey svg").attr("height",this.height+this.margin.top+this.margin.bottom).attr("width","100%").attr("viewBox","0 0 "+w()("#sankey").width()+" "+(this.height+this.margin.top+this.margin.bottom)),v.a.select("#sankey svg").select("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.sankey=v.a.sankey().nodeWidth(29).nodePadding(5).size([w()("#sankey").width(),this.height]);var r=this.sankey.link();this.sankey.nodes(e.graph.nodes).links(e.graph.links).layout(32);var n=v.a.select("#tooltip"),s=v.a.select("#sankey svg g").on("mousemove",function(){var t=v.a.mouse(this),a=p()(t,2);return e.x=a[0],e.y=a[1],n.style("top",e.y+25+"px").style("left",e.x+40+"px")}),i=s.select("g:nth-child(1)").selectAll(".link").data(e.graph.links,function(t){return String(t.source.name+t.target.name)});i.exit().transition().duration(400).style("stroke-width",0).remove(),i.sort(function(t,e){return e.dy-t.dy}).style("opacity",.4).transition().duration(800).attr("d",r).style("stroke",function(t){return e.colorStroke(t)}).style("stroke-width",function(t){return Math.max(1,t.dy)}),i.enter().append("path").attr("class","link").style("opacity",.4).style("cursor","pointer").on("mouseover",function(t){v.a.select(this).style("opacity",.8),window.e=t,v.a.selectAll(".link").each(function(t){window.e.target.name===t.source.name&&v.a.select(this).style("opacity",.8)}),n.style("border","1px groove "+e.colorStroke(t)),n.select(".tooltip-name").text(t.source.name+" → "+t.target.name),n.select(".tooltip-value").text(e.format(t.value)),n.select(".tooltip-icon").style("width","0px"),n.select(".tooltip-icon").html(""),n.style("visibility","visible")}).on("mouseout",function(t){v.a.select(this).style("opacity",.4),window.e=t,v.a.selectAll(".link").each(function(t){window.e.target.name===t.source.name&&v.a.select(this).style("opacity",.4)}),n.style("visibility","hidden")}).on("click",function(t){var a={},r=void 0;if(!e.filterDateIsCurrentDate())return!1;switch(e.parameters.DiagType){case 1:if("product"===t.target.type&&(a.ProductID=t.target.targetId,a.CompanyIDs=[]),"company"===t.target.type){a.ProductID="";var n=e.company.find(function(e){return e.name===t.targetName});a.CompanyIDs=[n.id],"product"===t.source.type&&(a.ProductID=t.source.targetId)}a.WorkNow=1;break;case 2:case 3:a.CompanyIDs=[t.target.targetId],r=Object(b.filter)(e.parameters.Products,{ShortName:t.source.name})[0].ProductID,a.ProductID=r,a.WorkNow=1}e.dispatchToHrList(f()({},a,{UseDefault:0}))}).style("stroke",function(t){return e.colorStroke(t)}).transition().delay(300).duration(800).attr("d",r).style("stroke-width",function(t){return Math.max(1,t.dy)});var o=s.select("g:nth-child(2)").selectAll(".node").data(e.graph.nodes,function(t){return t.key});o.exit().select("rect").transition().duration(800).attr("height",0).style("opacity",.1).remove(),o.exit().select("image").transition().duration(800).attr("y",0).style("opacity",.1).remove(),o.exit().select("text").transition().duration(800).attr("y",0).style("fill-opacity",.1).remove(),o.exit().remove();var l=o.enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.x+","+t.y/2+")"}),c=s.select("g:nth-child(2)").selectAll(".node").data(e.graph.nodes,function(t){return t.key});c.transition().duration(800).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),l.append("rect").on("mouseover",function(t){v.a.select(this).style("opacity",.8),window.e=t,window.color=t.color,v.a.selectAll(".link").each(function(t){window.e.name!==t.source.name&&window.e.name!==t.target.name||v.a.select(this).style("opacity",.8)}),n.select(".tooltip-name").text(t.name),t.icon?(n.select(".tooltip-icon").html(Object(g.f)(t.icon,e.colorTarget(t))),n.select(".tooltip-icon").style("width","22px")):(n.select(".tooltip-icon").style("width","0px"),n.select(".tooltip-icon").html(""));var a=(t.sourceLinks.length?t.sourceLinks:t.targetLinks).reduce(function(t,e){return t+e.value},0);n.select(".tooltip-value").text(e.format(a)),n.style("border","1px groove "+e.colorTarget(t)),n.style("visibility","visible")}).on("mouseout",function(t){v.a.select(this).style("opacity",1),window.e=t,v.a.selectAll(".link").each(function(t){window.e.name!==t.source.name&&window.e.name!==t.target.name||v.a.select(this).style("opacity",.4)}),n.style("visibility","hidden")}).on("click",function(t){t.icon&&e.goToProduct(t.url)}).style("opacity",0).attr("height",0).transition().delay(2500).duration(800).attr("height",function(t){return t.dy}).style("opacity",1),c.select("rect").attr("width",this.sankey.nodeWidth()).transition().duration(800).style("opacity",1).attr("height",function(t){return t.dy}).style("fill",function(t){return e.colorTarget(t)}).style("stroke",function(t){return v.a.rgb(e.colorTarget(t)).darker(.5)}),l.append("image").style("opacity",0).on("mouseover",function(t){v.a.select(this).style("opacity",.8),window.e=t,window.color=t.color,v.a.selectAll(".link").each(function(t){window.e.name!==t.source.name&&window.e.name!==t.target.name||v.a.select(this).style("opacity",.8)}),n.select(".tooltip-name").text(t.name),t.icon?(n.select(".tooltip-icon").html(Object(g.f)(t.icon,e.colorTarget(t))),n.select(".tooltip-icon").style("width","22px")):(n.select(".tooltip-icon").style("width","0px"),n.select(".tooltip-icon").html(""));var a=(t.sourceLinks.length?t.sourceLinks:t.targetLinks).reduce(function(t,e){return t+e.value},0);n.select(".tooltip-value").text(e.format(a)),n.style("border","1px groove "+e.colorTarget(t)),n.style("visibility","visible")}).on("mouseout",function(t){v.a.select(this).style("opacity",1),window.e=t,v.a.selectAll(".link").each(function(t){window.e.name!==t.source.name&&window.e.name!==t.target.name||v.a.select(this).style("opacity",.4)}),n.style("visibility","hidden")}).on("click",function(t){t.icon&&e.goToProduct(t.url)}),c.select("image").attr("xlink:href",function(t){if(t.icon&&t.dy>24)return"data:image/svg+xml;utf8,"+encodeURIComponent(Object(g.f)(t.icon,"#FFFFFF"))}).attr("width",22).attr("x",3).transition().duration(800).attr("y",function(t){return t.dy/2-11}).attr("height",22).style("opacity",1),l.append("text").style("fill-opacity",0).transition().duration(800).style("fill-opacity",1).attr("y",function(t){return t.dy/2}),c.select("text").attr("x",function(t){return-6}).attr("dy",".35em").attr("text-anchor","end").style("z-index","-1000").attr("transform",null).attr("y",function(t){return t.dy/2}).text(function(t){return t.name}).filter(function(t){return t.x<e.width/2}).attr("x",6+this.sankey.nodeWidth()).attr("text-anchor","start").transition().duration(800).style("fill-opacity",1).attr("y",function(t){return t.dy/2}),s.select("g:nth-child(2)").selectAll(".node").selectAll("text").each(function(t){var a="rgba(0,0,0,0);";a=t.dy<13&&"ДИТ"!==t.name?"rgba(0,0,0,0)":"company"===t.type?"#5e6d82":v.a.rgb(e.colorTarget(t)).darker(.7).toString(),v.a.select(this).style("fill",a)})}},watch:{staff:function(t){this.makeGraph(),this.updateChart(t)}}},D={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{fill:"rgba(0,0,0,0)"},attrs:{id:"sankey"}},[e("div",{staticClass:"panel-box panel-xsmall",attrs:{id:"tooltip"}},[e("div",{staticClass:"tooltip-icon"}),this._v(" "),e("div",{staticClass:"tooltip-name"},[this._v("text")]),this._v(" "),e("div",{staticClass:"tooltip-value"})])])}]};var S=a("VU/8")(k,D,!1,function(t){a("dGyj")},"data-v-376754e6",null).exports,P=a("MHaV"),I=a("+X65"),T=a.n(I),O={mixins:[P.a],data:function(){return{Filters:{DiagTypes:[],Clusters:[],Companies:[]},filtersForSankey:{Clusters:[],Products:[]},Parameters:{UseDefault:1,ClusterID:"",DiagType:1,CompanyIDs:[],Date:""},Data:[],UniqStaff:[],progress:""}},computed:{ClustersSankey:function(){return this.filtersForSankey.Clusters},ProductsSankey:function(){return this.filtersForSankey.Products},DateForPicker:{get:function(){return this.Parameters.Date?d()(this.Parameters.Date).format("MM.DD.YYYY"):""},set:function(t){this.Parameters.Date=t?d()(t,"MM.YYYY").format("YYYY-MM-DDT00:00:00"):""}}},created:function(){var t=this;return l()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.filtersForSankey.Clusters.length||t.getStaffFilters(),e.next=3,t.$api.getStaffByProductCompanyFilters();case 3:a=e.sent,t.Filters=i()(t.Filters,a),t.requestDistribution();case 6:case"end":return e.stop()}},e,t)}))()},watch:{Parameters:{handler:T()(function(t,e){this.requestDistribution()},1e3,{trailing:!0}),deep:!0}},methods:{setPickerDate:function(){if(!this.Parameters.Date||!this.$refs.dateInput)return!1;this.$refs.dateInput.userInput=d()(this.Parameters.Date).format("MM.YYYY")},getStaffFilters:function(){var t=this;return l()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getStaffFilters2();case 2:t.filtersForSankey=e.sent;case 3:case"end":return e.stop()}},e,t)}))()},requestDistribution:function(){var t=this;if("pending"===this.progress)return!1;this.progress="pending",this.fetchODistribution(this.Parameters).then(function(e){t.Data=e.Data,t.UniqStaff=e.UniqStaff,1===t.Parameters.UseDefault&&(t.Parameters=i()({},t.Parameters,e.Parameters,{UseDefault:0})),t.loadComplete=!0,setTimeout(function(){t.progress="success",t.setPickerDate()},150)}).catch(function(e){console.log(e),t.setPickerDate(),t.loadComplete=!0,t.progress="fail"})},fetchODistribution:function(t){var e=this;return this.$api.getStaffByProductCompany(t).catch(function(){e.pending="fail"})}},components:{sankey:S}},L={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("widget",{attrs:{"is-load":t.loadComplete,progress:t.progress}},[r("template",{slot:"title"},[t._v(t._s(t.$tree.Title))]),t._v(" "),r("div",{staticClass:"widget__body"},[r("div",{staticClass:"uk-grid uk-grid-match"},[r("div",{staticClass:"uk-width-large-2-3 uk-width-xlarge-3-4"},[r("non-data-stub",{attrs:{stub:"chart","stub-data":t.Data}},[r("sankey",{attrs:{staff:t.Data,parameters:{Clusters:t.ClustersSankey,Products:t.ProductsSankey,DiagType:t.Parameters.DiagType,Date:t.DateForPicker,CompanyIDs:t.Parameters.CompanyIDs,UniqStaff:t.UniqStaff}}})],1)],1),t._v(" "),r("div",{staticClass:"uk-width-large-1-3 uk-width-xlarge-1-4"},[r("form",{staticClass:"uk-form-stacked"},[r("div",{staticClass:"uk-form-row"},[r("div",{staticClass:"uk-form-label"},[t._v("Тип диаграммы")]),t._v(" "),r("div",{staticClass:"uk-form-controls"},[r("el-select",{attrs:{placeholder:""},model:{value:t.Parameters.DiagType,callback:function(e){t.$set(t.Parameters,"DiagType",e)},expression:"Parameters.DiagType"}},t._l(t.Filters.DiagTypes,function(t){return r("el-option",{key:t.ID,attrs:{label:t.Name,value:t.ID}})}))],1)]),t._v(" "),r("div",{staticClass:"uk-form-row"},[r("div",{staticClass:"uk-form-label"},[t._v("Кластер")]),t._v(" "),r("div",{staticClass:"uk-form-controls"},[r("el-select",{attrs:{placeholder:"",clearable:""},on:{change:t.requestDistribution},model:{value:t.Parameters.ClusterID,callback:function(e){t.$set(t.Parameters,"ClusterID",e)},expression:"Parameters.ClusterID"}},t._l(t.Filters.Clusters,function(t){return r("el-option",{key:t.ClusterID,attrs:{label:t.Name,value:t.ClusterID}})}))],1)]),t._v(" "),r("div",{staticClass:"uk-form-row"},[r("div",{staticClass:"uk-form-label"},[t._v("Организация")]),t._v(" "),r("div",{staticClass:"uk-form-controls"},[r("el-select",{attrs:{placeholder:"",multiple:"","collapse-tags":!0},on:{change:t.requestDistribution},model:{value:t.Parameters.CompanyIDs,callback:function(e){t.$set(t.Parameters,"CompanyIDs",e)},expression:"Parameters.CompanyIDs"}},t._l(t.Filters.Companies,function(e){return r("el-option",{key:e.CompanyID,attrs:{label:e.Name,value:e.CompanyID}},[r("span",{staticClass:"svg-icon svg-w-16"},[e.Icon?r("span",{domProps:{innerHTML:t._s(e.Icon)}}):r("span",{staticClass:"svg-theme-gray_dark",domProps:{innerHTML:t._s(a("lHUk"))}})]),t._v(" "),r("span",[t._v(t._s(e.Name))])])}))],1)]),t._v(" "),r("div",{staticClass:"uk-form-row"},[r("div",{staticClass:"uk-form-label"},[t._v("Статистика на дату")]),t._v(" "),r("div",{staticClass:"uk-form-controls"},[r("el-date-picker",{ref:"dateInput",attrs:{type:"month",format:"MM.yyyy",placeholder:"Месяц"},on:{blur:t.setPickerDate},model:{value:t.DateForPicker,callback:function(e){t.DateForPicker=e},expression:"DateForPicker"}})],1)])])])])])],2)},staticRenderFns:[]},F=a("VU/8")(O,L,!1,null,null,null);e.default=F.exports},ZTsW:function(t,e){},dGyj:function(t,e){},dYhQ:function(t,e,a){var r=a("9UkZ");t.exports=function(t){return r(t)?void 0:t}},dwsC:function(t,e,a){var r=a("86tT"),n=a("S7p9"),s=a("Dc0G"),i=s&&s.isMap,o=i?n(i):r;t.exports=o},eP4g:function(t,e,a){var r=a("gHOb"),n=a("UnEC"),s="[object Set]";t.exports=function(t){return n(t)&&r(t)==s}},hrPF:function(t,e){t.exports=function(t,e){var a=-1,r=t.length;for(e||(e=Array(r));++a<r;)e[a]=t[a];return e}},hygk:function(t,e,a){var r=a("YDHx");t.exports=function(t,e){return r(t,e)}},jD7S:function(t,e,a){var r=a("tv3T"),n=a("ktak");t.exports=function(t,e){return t&&r(e,n(e),t)}},jSxR:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 612 612" xml:space="preserve"><path d="M306.001,325.988c90.563-0.005,123.147-90.682,131.679-165.167C448.188,69.06,404.799,0,306.001,0 c-98.782,0-142.195,69.055-131.679,160.82C182.862,235.304,215.436,325.995,306.001,325.988z"></path><path d="M550.981,541.908c-0.99-28.904-4.377-57.939-9.421-86.393c-6.111-34.469-13.889-85.002-43.983-107.465 c-17.404-12.988-39.941-17.249-59.865-25.081c-9.697-3.81-18.384-7.594-26.537-11.901c-27.518,30.176-63.4,45.962-105.186,45.964 c-41.774,0-77.652-15.786-105.167-45.964c-8.153,4.308-16.84,8.093-26.537,11.901c-19.924,7.832-42.461,12.092-59.863,25.081 c-30.096,22.463-37.873,72.996-43.983,107.465c-5.045,28.454-8.433,57.489-9.422,86.393 c-0.766,22.387,10.288,25.525,29.017,32.284c23.453,8.458,47.666,14.737,72.041,19.884c47.077,9.941,95.603,17.582,143.921,17.924 c48.318-0.343,96.844-7.983,143.921-17.924c24.375-5.145,48.59-11.424,72.041-19.884 C540.694,567.435,551.747,564.297,550.981,541.908z"></path></svg>'},kvU2:function(t,e,a){var r=a("Fkvj"),n=1,s=4;t.exports=function(t){return r(t,n|s)}},lHK6:function(t,e,a){var r=a("/GnY"),n=a("gHOb"),s=a("1Yb9"),i=a("NGEn"),o=a("bGc4"),l=a("ggOT"),c=a("HT7L"),d=a("YsVG"),u="[object Map]",f="[object Set]",m=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(o(t)&&(i(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||d(t)||s(t)))return!t.length;var e=n(t);if(e==u||e==f)return!t.size;if(c(t))return!r(t).length;for(var a in t)if(m.call(t,a))return!1;return!0}},"mKB/":function(t,e,a){(function(t){var r=a("TQ3y"),n="object"==typeof e&&e&&!e.nodeType&&e,s=n&&"object"==typeof t&&t&&!t.nodeType&&t,i=s&&s.exports===n?r.Buffer:void 0,o=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var a=t.length,r=o?o(a):new t.constructor(a);return t.copy(r),r}}).call(e,a("3IRH")(t))},mahr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("iClD"),n={mixins:[a("MHaV").a],data:function(){return{desc:{}}},created:function(){var t=this;this.$api.getEmplyeeContacts({Url:this.url}).then(function(e){t.desc=e,t.loadComplete=!0})},methods:{checkNbsp:r.a}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("widget",{attrs:{"grid-class":"uk-width-xxlarge-1-2","is-load":t.loadComplete}},[a("template",{slot:"title"},[t._v(t._s(t.$tree.Title))]),t._v(" "),a("div",{staticClass:"widget__body pb-0"},[a("div",{staticClass:"uk-grid uk-grid-width-large-1-2"},[a("dl",{staticClass:"dl-large mb-20"},[a("dt",[t._v("Рабочий телефон")]),t._v(" "),a("dd",{domProps:{innerHTML:t._s(t.checkNbsp(t.desc.Phone))}})]),t._v(" "),a("dl",{staticClass:"dl-large mb-20"},[a("dt",[t._v("Внутренний телефон")]),t._v(" "),a("dd",{domProps:{innerHTML:t._s(t.checkNbsp(t.desc.LocalPhone))}})]),t._v(" "),a("dl",{staticClass:"dl-large mb-20"},[a("dt",[t._v("Мобильный телефон")]),t._v(" "),a("dd",{domProps:{innerHTML:t._s(t.checkNbsp(t.desc.MobilePhone))}})]),t._v(" "),a("dl",{staticClass:"dl-large mb-20"},[a("dt",[t._v("Email")]),t._v(" "),""===t.desc.Email?[a("dd",[t._v(" ")])]:[a("dd",[a("a",{attrs:{href:"mailto:"+t.desc.Email}},[t._v(t._s(t.desc.Email))])])]],2),t._v(" "),a("dl",{staticClass:"dl-large mb-20"},[a("dt",[t._v("Кабинет")]),t._v(" "),a("dd",{domProps:{innerHTML:t._s(t.checkNbsp(t.desc.OfficeNumber))}})]),t._v(" "),a("dl",{staticClass:"dl-large mb-20"},[a("dt",[t._v("Адрес офиса")]),t._v(" "),a("dd",{domProps:{innerHTML:t._s(t.checkNbsp(t.desc.OfficeAddress))}})])])])],2)},staticRenderFns:[]},i=a("VU/8")(n,s,!1,null,null,null);e.default=i.exports},oeUe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Dd8w"),n=a.n(r),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dit-switch",on:{click:function(e){return e.preventDefault(),t.toggleOnOff(e)}}},[a("input",{attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:t.ExternalOrganisation}}),t._v(" "),a("label",{attrs:{for:"checkbox"}},[t._v("Включая внешние организации")]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dit-switch-bar"},[e("div",{staticClass:"dit-switch-button"})])}]},i=a("VU/8")({props:["ExternalOrganisation"],methods:{toggleOnOff:function(){this.$emit("extOrgToggle",!this.ExternalOrganisation)}}},s,!1,null,null,null).exports,o=a("MHaV"),l=a("tm+F"),c={mixins:[o.a],data:function(){return{Data:[],ExternalOrganisationVisible:!1,Parameters:{UseDefault:1},loadInProgress:!0}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.loadInProgress=!0,this.$api.getStaffStatBlocks(this.Parameters).then(function(e){t.Parameters=e.Parameters,t.ExternalOrganisationVisible=e.ExternalOrganisationVisible,t.Data=e.Data,t.loadComplete=!0,t.loadInProgress=!1}).catch(function(e){t.loadComplete=!0,t.loadInProgress=!1})},extOrgToggle:function(t){this.Parameters.ExternalOrganisation=t,this.getData()},gotoItem:function(t){var e=this;this.$goTo("cfc.hr.list",null,null,function(a){e.$messageSend("cfc.hr.list.list","setWidgetParameters",n()({UseDefault:0},t.SmartLink.Parameters)),a()})}},components:{externalOrgSwitch:i,StatPanel:l.a}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("widget",{attrs:{"is-load":t.loadComplete,progress:t.loadInProgress?"pending":""}},[a("template",{slot:"title"},[t._v(t._s(t.$tree.Title))]),t._v(" "),t.ExternalOrganisationVisible?a("externalOrgSwitch",{attrs:{slot:"right-panel","external-organisation":t.Parameters.ExternalOrganisation},on:{extOrgToggle:t.extOrgToggle},slot:"right-panel"}):t._e(),t._v(" "),a("div",{staticClass:"widget__body pb-0"},[a("div",{staticClass:"uk-grid uk-grid-match uk-grid-width-small-1-2 uk-grid-width-medium-1-3 uk-grid-width-large-1-4"},t._l(t.Data,function(e){return a("StatPanel",{key:e.Name,attrs:{item:e,link:"cfc.hr.list"},nativeOn:{click:function(a){t.gotoItem(e)}}})}))])],2)},staticRenderFns:[]},u=a("VU/8")(c,d,!1,null,null,null);e.default=u.exports},py9u:function(t,e,a){var r=a("tv3T"),n=a("t8rQ");t.exports=function(t,e){return t&&r(e,n(e),t)}},rCVp:function(t,e,a){var r=a("1C79");t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},sb6x:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={mixins:[a("MHaV").a],data:function(){return{targetClass:"uk-width-xxlarge-1-2",currentUsage:{GovTask:{Name:"",Icon:"",ID:"",Url:""},DateFrom:"",Part:0}}},created:function(){var t=this;this.$api.getEmployeeGovTasks({Slug:this.url}).then(function(e){t.currentUsage=e.CurrentUsage,t.loadComplete=!0})},computed:{concatValuesGovTask:function(){var t=this.currentUsage.GovTask;return""+t.Name+t.Icon+t.ID+t.Url}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("widget",{attrs:{"grid-class":"uk-width-xxlarge-1-2","is-load":t.loadComplete}},[a("template",{slot:"title"},[t._v(t._s(t.$tree.Title))]),t._v(" "),a("div",{staticClass:"widget__body pb-0"},[a("non-data-stub",{attrs:{stub:"text","stub-class":"mb-20 pos-abs-center","stub-data":t.concatValuesGovTask}},[a("div",{staticClass:"uk-grid uk-grid-match uk-grid-width-small-1-2 uk-grid-width-medium-1-3 uk-grid-width-large-1-4 uk-grid-width-xlarge-1-5 uk-grid-width-xxlarge-1-3"},[a("div",{staticClass:"mb-20 staff-employment"},[a("div",{staticClass:"panel-box"},[a("div",[a("div",{staticClass:"work-name"},[t._v(t._s(t.currentUsage.GovTask.Name))]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.currentUsage.GovTask.Icon)}}),t._v(" "),a("div",{staticClass:"text-muted text-small"},[t._v(" "+t._s(t._f("monthFrom")(t.currentUsage.DateFrom)))])]),t._v(" "),a("div",{staticClass:"dit-number dit-number-colored"},[t._v(t._s(t.currentUsage.Part)+" %")])])])])])],1)],2)},staticRenderFns:[]},s=a("VU/8")(r,n,!1,null,null,null);e.default=s.exports},t8rQ:function(t,e,a){var r=a("7e4z"),n=a("G0Wc"),s=a("bGc4");t.exports=function(t){return s(t)?r(t,!0):n(t)}},vi0E:function(t,e,a){var r=a("f931")(Object.getPrototypeOf,Object);t.exports=r},w9Mt:function(t,e,a){var r=a("ZD0O"),n=a("2N6f")(function(t,e){return null==t?{}:r(t,e)});t.exports=n},xond:function(t,e,a){var r=a("FCuZ"),n=a("09Qt"),s=a("t8rQ");t.exports=function(t){return r(t,s,n)}}});